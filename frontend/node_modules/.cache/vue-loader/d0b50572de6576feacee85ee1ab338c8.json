{"remainingRequest":"C:\\Users\\gabri\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\gabri\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\src\\components\\ComissaoTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\gabri\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\src\\components\\ComissaoTable.vue","mtime":1608259037657},{"path":"C:\\Users\\gabri\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\gabri\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\gabri\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\gabri\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnCgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnQ29taXNzYW9UYWJsZScsCiAgICBwcm9wczogWydkYXRhX2luaScsICdkYXRhX2ZpbScsICdkYWRvc19jb21pc3NhbyddLAogICAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBzb3J0Qnk6ICdiYXNlX2NhbGNfY29taXNzYW8nLAogICAgICBzb3J0RGVzYzogdHJ1ZSwKICAgICAgZmllbGRzOiBbCiAgICAgICAge2tleTogJ3BvcycsIGxhYmVsOiAnUG9zLid9LAogICAgICAgIHtrZXk6ICdjb2RfdmVuZGVkb3InLCBsYWJlbDogJ0NvZC4gVmVuZGVkb3InfSwKICAgICAgICB7a2V5OiAnbm9tX3ZlbmRlZG9yJywgbGFiZWw6ICdOb20uIFZlbmRlZG9yJ30sCiAgICAgICAge2tleTogJ2Jhc2VfY2FsY19jb21pc3NhbycsIGxhYmVsOiAnQmFzZSBDYWxjLid9LAogICAgICAgIHtrZXk6ICdjcmVkX2RldicsIGxhYmVsOiAnQ3JlZC4gRGV2Lid9LAogICAgICAgIHtrZXk6ICd2bHJfY29taXNzYW8nLCBsYWJlbDogJ1Zsci4gQ29tLid9LAogICAgICAgIHtrZXk6ICdkYXRfZW1pc3Nhb19maW0nLCBsYWJlbDogJ0RhdGEnfV0sCiAgICAgIGl0ZW1zOiBbXSwKICAgICAgc3VtX2NvbWlzc2FvOiAwLAogICAgICBwZXJjZW50X2NvbWlzc2FvOiAwLjAxCiAgICB9CiAgfSwKICBiZWZvcmVNb3VudCAoKSB7CiAgICB0aGlzLmxvYWRDb21pc3NhbygpCiAgICAgIC8vIHRoaXMuY29taXNzYW8gPSB0aGlzLmRhZG9zX2NvbWlzc2FvCiAgfSwKICBtb3VudGVkICgpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmRhZG9zX2NvbWlzc2FvKQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaXRlbXMpCiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2FkQ29taXNzYW8gKCkgewogICAgICAgIC8vIHRoaXMuaXRlbXMgPSB0aGlzLmRhZG9zX2NvbWlzc2FvCiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5kYWRvc19jb21pc3NhbykKICAgICAgY29uc3QgcGF0aCA9ICcvYXBpL2NvbWlzc2FvL3NlbGVjdCcKICAgICAgLy8gY29uc3QgcGF0aCA9ICdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXBpL2NvbWlzc2FvL3NlbGVjdCcKCiAgICAgICAgY29uc29sZS5sb2codGhpcy5kYWRvc19jb21pc3Nhby5sZW5ndGgpCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRhZG9zX2NvbWlzc2FvLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBjb21pc3Nhb192ZW5kZWRvciA9IHsKICAgICAgICAgICAgICAgY29kX3ZlbmRlZG9yOiB0aGlzLmRhZG9zX2NvbWlzc2FvW2ldWzBdLAogICAgICAgICAgICAgICBub21fdmVuZGVkb3I6IHRoaXMuZGFkb3NfY29taXNzYW9baV1bMV0sCiAgICAgICAgICAgICAgIGJhc2VfY2FsY19jb21pc3NhbzogdGhpcy5kYWRvc19jb21pc3Nhb1tpXVsyXSwKICAgICAgICAgICAgICAgY3JlZF9kZXY6IHRoaXMuZGFkb3NfY29taXNzYW9baV1bM10sCiAgICAgICAgICAgICAgIHZscl9jb21pc3NhbzogIHRoaXMuZGFkb3NfY29taXNzYW9baV1bMl0qdGhpcy5wZXJjZW50X2NvbWlzc2FvLAogICAgICAgICAgICAgICBkYXRfZW1pc3Nhb19maW06IG1vbWVudCh0aGlzLmRhdGFfaW5pKS5mb3JtYXQoJ0REL01NL1lZWVknKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuc3VtX2NvbWlzc2FvID0gdGhpcy5zdW1fY29taXNzYW8gKyB0aGlzLmRhZG9zX2NvbWlzc2FvW2ldWzJdCiAgICAgICAgdGhpcy5pdGVtcy5wdXNoKGNvbWlzc2FvX3ZlbmRlZG9yKQogICAgICAgIH0KCgogICAgICAgIGNvbnN0IHBheWxvYWQgPSB7CiAgICAgICAgZGF0YV9pbmk6IHRoaXMuZGF0YV9pbmksCiAgICAgICAgZGF0YV9maW06IHRoaXMuZGF0YV9maW0KICAgICAgfQogICAgICBheGlvcy5wb3N0KHBhdGgsIHBheWxvYWQpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpCiAgICAgICAgICAvLyBjb25zdCBwYXlsb2FkTGVuZ3RoID0gcmVzLmRhdGEubGVuZ3RoCiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwYXlsb2FkTGVuZ3RoKQogICAgICAgICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCBwYXlsb2FkTGVuZ3RoOyBpKyspIHsKICAgICAgICAgIC8vICAgdmFyIG5ld0NvbWlzc2FvID0gewogICAgICAgICAgLy8gICAgIGNvZF92ZW5kZWRvcjogcmVzLmRhdGFbaV0uY29kX3ZlbmRlZG9yLAogICAgICAgICAgLy8gICAgIG5vbV92ZW5kZWRvcjogcmVzLmRhdGFbaV0ubm9tX3ZlbmRlZG9yLAogICAgICAgICAgLy8gICAgIGJhc2VfY2FsY19jb21pc3NhbzogdGhpcy4kb3B0aW9ucy5maWx0ZXJzLm51bWVybyhyZXMuZGF0YVtpXS5iYXNlX2NhbGNfY29taXNzYW8pLAogICAgICAgICAgLy8gICAgIGNyZWRfZGV2OiB0aGlzLiRvcHRpb25zLmZpbHRlcnMubnVtZXJvKHJlcy5kYXRhW2ldLmNyZWRfZGV2KSwKICAgICAgICAgIC8vICAgICB2bHJfY29taXNzYW86IHRoaXMuJG9wdGlvbnMuZmlsdGVycy5udW1lcm8ocmVzLmRhdGFbaV0udmxyX2NvbWlzc2FvKSwKICAgICAgICAgIC8vICAgICBkYXRfZW1pc3Nhb19pbmk6IG1vbWVudChyZXMuZGF0YVtpXS5kYXRfZW1pc3Nhb19pbmkpLmZvcm1hdCgnREQvTU0vWVlZWScpLAogICAgICAgICAgLy8gICAgIGRhdF9lbWlzc2FvX2ZpbTogbW9tZW50KHJlcy5kYXRhW2ldLmRhdF9lbWlzc2FvX2ZpbSkuZm9ybWF0KCdERC9NTS9ZWVlZJyksCiAgICAgICAgICAvLyAgICAgcG9zOiAnJwogICAgICAgICAgLy8gICB9CiAgICAgICAgICAvLyAgIHRoaXMuc3VtX2NvbWlzc2FvID0gdGhpcy5zdW1fY29taXNzYW8gKyByZXMuZGF0YVtpXS5iYXNlX2NhbGNfY29taXNzYW8KICAgICAgICAgIC8vICAgdGhpcy5pdGVtcy5wdXNoKG5ld0NvbWlzc2FvKQogICAgICAgICAgLy8gfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgIH0pCiAgICB9CiAgfQp9Cgo="},{"version":3,"sources":["ComissaoTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ComissaoTable.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"comissao-table\">\n    <div>\n      <b-table striped hover :items=\"items\" :fields=\"fields\" class=\"text-right\">\n        <template v-slot:cell(pos)=\"data\">\n          {{ data.index + 1 }}\n        </template>\n      </b-table>\n\n<!--        <table class=\"table table-hover\">-->\n<!--            <tbody>-->\n<!--            <tr v-for=\"comissao in dados_comissao\" :key=\"comissao.id\">-->\n<!--                <td>{{comissao}}</td>-->\n<!--            </tr>-->\n<!--            </tbody>-->\n<!--        </table>-->\n      <b-alert show dismissible variant=\"secondary\">\n<!--        <div class=\"text-center\">Total de Vendas: <strong> {{ sum_comissao | dinheiro }}</strong></div>-->\n        <div class=\"text-center\">Total de Vendas: <strong> {{ sum_comissao }}</strong></div>\n      </b-alert>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport moment from 'moment'\n\nexport default {\n    name: 'ComissaoTable',\n    props: ['data_ini', 'data_fim', 'dados_comissao'],\n    data () {\n    return {\n      sortBy: 'base_calc_comissao',\n      sortDesc: true,\n      fields: [\n        {key: 'pos', label: 'Pos.'},\n        {key: 'cod_vendedor', label: 'Cod. Vendedor'},\n        {key: 'nom_vendedor', label: 'Nom. Vendedor'},\n        {key: 'base_calc_comissao', label: 'Base Calc.'},\n        {key: 'cred_dev', label: 'Cred. Dev.'},\n        {key: 'vlr_comissao', label: 'Vlr. Com.'},\n        {key: 'dat_emissao_fim', label: 'Data'}],\n      items: [],\n      sum_comissao: 0,\n      percent_comissao: 0.01\n    }\n  },\n  beforeMount () {\n    this.loadComissao()\n      // this.comissao = this.dados_comissao\n  },\n  mounted () {\n        // console.log(this.dados_comissao)\n        console.log(this.items)\n  },\n  methods: {\n    loadComissao () {\n        // this.items = this.dados_comissao\n        // console.log(this.dados_comissao)\n      const path = '/api/comissao/select'\n      // const path = 'http://localhost:5000/api/comissao/select'\n\n        console.log(this.dados_comissao.length)\n        for (let i = 0; i < this.dados_comissao.length; i++) {\n            var comissao_vendedor = {\n               cod_vendedor: this.dados_comissao[i][0],\n               nom_vendedor: this.dados_comissao[i][1],\n               base_calc_comissao: this.dados_comissao[i][2],\n               cred_dev: this.dados_comissao[i][3],\n               vlr_comissao:  this.dados_comissao[i][2]*this.percent_comissao,\n               dat_emissao_fim: moment(this.data_ini).format('DD/MM/YYYY')\n            }\n            this.sum_comissao = this.sum_comissao + this.dados_comissao[i][2]\n        this.items.push(comissao_vendedor)\n        }\n\n\n        const payload = {\n        data_ini: this.data_ini,\n        data_fim: this.data_fim\n      }\n      axios.post(path, payload)\n        .then((res) => {\n          console.log(res.data)\n          // const payloadLength = res.data.length\n          // console.log(payloadLength)\n          // for (let i = 0; i < payloadLength; i++) {\n          //   var newComissao = {\n          //     cod_vendedor: res.data[i].cod_vendedor,\n          //     nom_vendedor: res.data[i].nom_vendedor,\n          //     base_calc_comissao: this.$options.filters.numero(res.data[i].base_calc_comissao),\n          //     cred_dev: this.$options.filters.numero(res.data[i].cred_dev),\n          //     vlr_comissao: this.$options.filters.numero(res.data[i].vlr_comissao),\n          //     dat_emissao_ini: moment(res.data[i].dat_emissao_ini).format('DD/MM/YYYY'),\n          //     dat_emissao_fim: moment(res.data[i].dat_emissao_fim).format('DD/MM/YYYY'),\n          //     pos: ''\n          //   }\n          //   this.sum_comissao = this.sum_comissao + res.data[i].base_calc_comissao\n          //   this.items.push(newComissao)\n          // }\n        })\n        .catch((error) => {\n          // eslint-disable-next-line\n            console.error(error);\n        })\n    }\n  }\n}\n\n</script>\n\n<style scoped>\n\n</style>\n"]}]}