{"remainingRequest":"C:\\Users\\Gabriel\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Gabriel\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\src\\components\\ComissaoTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Gabriel\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\src\\components\\ComissaoTable.vue","mtime":1636210328046},{"path":"C:\\Users\\Gabriel\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Gabriel\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Gabriel\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Gabriel\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCBheGlvcyBmcm9tICdheGlvcycKLy8gaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnCgppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ0NvbWlzc2FvVGFibGUnLAogICAgcHJvcHM6IFsnZGF0YV9pbmknLCAnZGF0YV9maW0nLCAnZGFkb3NfY29taXNzYW8nXSwKICAgIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgc29ydEJ5OiAnYmFzZV9jYWxjX2NvbWlzc2FvJywKICAgICAgc29ydERlc2M6IHRydWUsCiAgICAgIGZpZWxkczogWwogICAgICAgIHtrZXk6ICdwb3MnLCBsYWJlbDogJ1Bvcy4nfSwKICAgICAgICB7a2V5OiAnY29kX3ZlbmRlZG9yJywgbGFiZWw6ICdDb2QuIFZlbmRlZG9yJ30sCiAgICAgICAge2tleTogJ25vbV92ZW5kZWRvcicsIGxhYmVsOiAnTm9tLiBWZW5kZWRvcid9LAogICAgICAgIHtrZXk6ICdiYXNlX2NhbGNfY29taXNzYW8nLCBsYWJlbDogJ0Jhc2UgQ2FsYy4nfSwKICAgICAgICB7a2V5OiAnY3JlZF9kZXYnLCBsYWJlbDogJ0NyZWQuIERldi4nfSwKICAgICAgICB7a2V5OiAndmxyX2NvbWlzc2FvJywgbGFiZWw6ICdWbHIuIENvbS4nfSwKICAgICAgICAvLyB7a2V5OiAnZGF0YV9pbmknLCBsYWJlbDogJ0RhdGFfaW5pJ31dLAogICAgICAgIHtrZXk6ICdkYXRhX2ZpbScsIGxhYmVsOiAnRGF0YSd9XSwKICAgICAgaXRlbXM6IFtdLAogICAgICBzdW1fY29taXNzYW86ICcnLAogICAgICBjb21pc3Nhb192ZW5kZWRvcmVzX2FycmF5OiB0aGlzLmRhZG9zX2NvbWlzc2FvLmNvbWlzc2FvX3ZlbmRlZG9yZXMKCiAgICB9CiAgfSwKICBiZWZvcmVNb3VudCAoKSB7CiAgICB0aGlzLmxvYWRDb21pc3NhbygpCiAgfSwKICBtb3VudGVkICgpIHsKICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBjb21wdXRlZF9zdW1fY29taXNzYW8oKSB7CiAgICAgICAgICAgIGxldCBjb21pc3Nhb192ZW5kZWRvcmVzX3N1bSA9IHRoaXMuaXRlbXMucmVkdWNlKGZ1bmN0aW9uIChzdW0sIGl0ZW0pIHsKICAgICAgICAgICAgICAgIGxldCBpdGVtVmFsb3IgPSBwYXJzZUZsb2F0KGl0ZW0uYmFzZV9jYWxjX2NvbWlzc2FvKQogICAgICAgICAgICAgICAgaWYgKCFpc05hTihpdGVtVmFsb3IpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1bSArIGl0ZW1WYWxvcgogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3VtCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIDApCiAgICAgICAgICAgIHJldHVybiBjb21pc3Nhb192ZW5kZWRvcmVzX3N1bQogICAgICAgIH0sCiAgICAgICAgY29tcHV0ZWRfY29taXNzYW9fdmVuZGVkb3Jlc19hcnJheSgpIHsKICAgICAgICAgICByZXR1cm4gdGhpcy5jb21pc3Nhb192ZW5kZWRvcmVzX2FycmF5CiAgICAgICAgfQogICAgfSwKICBtZXRob2RzOiB7CiAgICBsb2FkQ29taXNzYW8gKCkgewogICAgICAgIHRoaXMuaXRlbXMgPSBbXQogICAgICBjb25zb2xlLmxvZygidGhpcy5kYWRvc19jb21pc3NhbyIpCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZGFkb3NfY29taXNzYW8pCiAgICAgIC8vIGxldCBjb21pc3Nhb192ZW5kZWRvcmVzX2FycmF5ID0gdGhpcy5kYWRvc19jb21pc3Nhby5jb21pc3Nhb192ZW5kZWRvcmVzCiAgICAgIGZvciAoY29uc3QgY29taXNzYW9fdmVuZGVkb3IgaW4gdGhpcy5jb21wdXRlZF9jb21pc3Nhb192ZW5kZWRvcmVzX2FycmF5KSB7CiAgICAgICAgICB0aGlzLml0ZW1zLnB1c2godGhpcy5jb21pc3Nhb192ZW5kZWRvcmVzX2FycmF5W2NvbWlzc2FvX3ZlbmRlZG9yXSkKICAgICAgfQogICAgfSwKICAgICAgcmVjYXJyZWdhckNvbWlzc2FvKCkgewogICAgICAgIGNvbnN0IHBhdGggPSBgL2FwaS9jb21pc3Nhby9kZWxldGUvJHt0aGlzLmRhdGFfaW5pfWAKICAgICAgYXhpb3MuZGVsZXRlKHBhdGgpCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICBjb25zdCBwYXRoID0gYC9hcGkvY29taXNzYW8vJHt0aGlzLmRhdGFfaW5pfS8ke3RoaXMuZGF0YV9maW19YAogICAgICAgICAgICBheGlvcy5nZXQocGF0aCkKICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAnQ29taXNzYW8nLCBwYXJhbXM6IHtjdXJyZW50Q29tcG9uZW50OiAndGFiZWxhJywgZGF0YV9pbmk6IHRoaXMuZGF0YV9pbmksIGRhdGFfZmltOiB0aGlzLmRhdGFfZmltLCBkYWRvc19jb21pc3NhbzogcmVzLmRhdGF9fSkuY2F0Y2goKCk9Pnt9KTsKICAgICAgICAgICAgICAgIHRoaXMuY29taXNzYW9fdmVuZGVkb3Jlc19hcnJheSA9IHJlcy5kYXRhLmNvbWlzc2FvX3ZlbmRlZG9yZXMKICAgICAgICAgICAgICAgIHRoaXMubG9hZENvbWlzc2FvKCkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICB9KX0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgfSkKCiAgICAgIH0KICB9Cgp9Cgo="},{"version":3,"sources":["ComissaoTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA","file":"ComissaoTable.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"comissao-table\">\n    <div>\n        <b-form @submit.stop.prevent=\"recarregarComissao\">\n                <b-button type=\"submit\" variant=\"primary\">Recarregar </b-button>\n<!--                <b-button type=\"submit\" variant=\"primary\">Recarregar <img src=\"../assets/refresh-icon.png\" /></b-button>-->\n            </b-form>\n\n      <b-table striped hover :items=\"items\" :fields=\"fields\" class=\"text-right\" :small=true>\n        <template v-slot:cell(pos)=\"data\">\n          {{ data.index + 1}}\n        </template>\n      </b-table>\n      <b-alert show dismissible variant=\"secondary\">\n<!--        <div class=\"text-center\">Total de Vendas: <strong> :{{this.dados_comissao.comissao_total}} </strong></div>-->\n        <div class=\"text-center\">Total de Vendas: <strong> {{ this.computed_sum_comissao | dinheiro }}</strong></div>\n<!--        <div class=\"text-center\">Total de Vendas: <strong> {{ sum_comissao }}</strong></div>-->\n      </b-alert>\n    </div>\n  </div>\n</template>\n\n<script>\n// import axios from 'axios'\n// import moment from 'moment'\n\nimport axios from \"axios\";\n\nexport default {\n    name: 'ComissaoTable',\n    props: ['data_ini', 'data_fim', 'dados_comissao'],\n    data () {\n    return {\n      sortBy: 'base_calc_comissao',\n      sortDesc: true,\n      fields: [\n        {key: 'pos', label: 'Pos.'},\n        {key: 'cod_vendedor', label: 'Cod. Vendedor'},\n        {key: 'nom_vendedor', label: 'Nom. Vendedor'},\n        {key: 'base_calc_comissao', label: 'Base Calc.'},\n        {key: 'cred_dev', label: 'Cred. Dev.'},\n        {key: 'vlr_comissao', label: 'Vlr. Com.'},\n        // {key: 'data_ini', label: 'Data_ini'}],\n        {key: 'data_fim', label: 'Data'}],\n      items: [],\n      sum_comissao: '',\n      comissao_vendedores_array: this.dados_comissao.comissao_vendedores\n\n    }\n  },\n  beforeMount () {\n    this.loadComissao()\n  },\n  mounted () {\n  },\n    computed: {\n        computed_sum_comissao() {\n            let comissao_vendedores_sum = this.items.reduce(function (sum, item) {\n                let itemValor = parseFloat(item.base_calc_comissao)\n                if (!isNaN(itemValor)) {\n                    return sum + itemValor\n                } else {\n                    return sum\n                }\n            }, 0)\n            return comissao_vendedores_sum\n        },\n        computed_comissao_vendedores_array() {\n           return this.comissao_vendedores_array\n        }\n    },\n  methods: {\n    loadComissao () {\n        this.items = []\n      console.log(\"this.dados_comissao\")\n      console.log(this.dados_comissao)\n      // let comissao_vendedores_array = this.dados_comissao.comissao_vendedores\n      for (const comissao_vendedor in this.computed_comissao_vendedores_array) {\n          this.items.push(this.comissao_vendedores_array[comissao_vendedor])\n      }\n    },\n      recarregarComissao() {\n        const path = `/api/comissao/delete/${this.data_ini}`\n      axios.delete(path)\n        .then(() => {\n            const path = `/api/comissao/${this.data_ini}/${this.data_fim}`\n            axios.get(path)\n                .then((res) => {\n                // this.$router.push({name: 'Comissao', params: {currentComponent: 'tabela', data_ini: this.data_ini, data_fim: this.data_fim, dados_comissao: res.data}}).catch(()=>{});\n                this.comissao_vendedores_array = res.data.comissao_vendedores\n                this.loadComissao()\n                })\n                .catch((error) => {\n                console.log(error)\n        })})\n        .catch((error) => {\n          console.log(error)\n        })\n\n      }\n  }\n\n}\n\n</script>\n\n<style scoped>\n\n</style>\n"]}]}