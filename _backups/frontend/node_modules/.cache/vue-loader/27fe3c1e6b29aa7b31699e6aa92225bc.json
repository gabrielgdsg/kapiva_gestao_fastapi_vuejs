{"remainingRequest":"C:\\Users\\Gabriel\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Gabriel\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\src\\views\\Estoque_test.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Gabriel\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\src\\views\\Estoque_test.vue","mtime":1695326492596},{"path":"C:\\Users\\Gabriel\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Gabriel\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Gabriel\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Gabriel\\PycharmProjects\\kapiva_gestao_fastapi_vuejs\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7VnVlQXV0b3N1Z2dlc3R9IGZyb20gJ3Z1ZS1hdXRvc3VnZ2VzdCcKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwovLyBpbXBvcnQgRGF0ZVBpY2tlciBmcm9tICd2dWUyLWRhdGVwaWNrZXInCmltcG9ydCAndnVlMi1kYXRlcGlja2VyL2luZGV4LmNzcycKaW1wb3J0ICd2dWUyLWRhdGVwaWNrZXIvbG9jYWxlL3B0LWJyJwppbXBvcnQgTXlkYXRlcGlja2VyIGZyb20gJy4uL2NvbXBvbmVudHMvTXlkYXRlcGlja2VyJwovLyBpbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiRXN0b3F1ZV90ZXN0IiwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICAnbXlkYXRlcGlja2VyLWluaSc6IE15ZGF0ZXBpY2tlciwKICAgICAgICAnbXlkYXRlcGlja2VyLWZpbSc6IE15ZGF0ZXBpY2tlciwKICAgICAgICAndnVlLWF1dG9zdWdnZXN0JzogVnVlQXV0b3N1Z2dlc3QKICAgIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGFfanVzdF9mb3JfdGVzdGluZzonJywKICAgICAgICAgICAgY29kX21hcmNhOiAwLCAvL29seW1waWt1cyA9IDU2NwogICAgICAgICAgICAvLyBjb2RfbWFyY2E6ICc1NjcnLCAvL29seW1waWt1cyA9IDU2NwogICAgICAgICAgICAvLyBkYXRhX21vdnRvX2luaTogbmV3IERhdGUoJzIwMTktMDEtMDEgMDM6MDA6MDAuMDAwJyksCiAgICAgICAgICAgIC8vIGRhdGFfbW92dG9fZmltOiBuZXcgRGF0ZSwKICAgICAgICAgICAgZGVmYXVsdF9kYXRlOiBuZXcgRGF0ZSgnMTkwMC0wMS0wMSAwMTowMDowMC4wMDAnKSwKICAgICAgICAgICAgZGF0ZXBpY2tlcl9pbmk6IG5ldyBEYXRlKDE5MDAsIDAsIDEpLAogICAgICAgICAgICBkYXRlcGlja2VyX2ZpbTogbmV3IERhdGUoMjAxOSwgMTEsIDE2KSwKICAgICAgICAgICAgZGF0YV9tb3Z0b19pbmk6ICcnLAogICAgICAgICAgICBkYXRhX21vdnRvX2ZpbTogJycsCiAgICAgICAgICAgIC8vIGRlZmF1bHRfZGF0ZTogbmV3IERhdGUoJzE5MDAtMDEtMDEgMDE6MDA6MDAuMDAwJyksCiAgICAgICAgICAgIGZpbHRlcjogbnVsbCwKICAgICAgICAgICAgZmlsdGVyczoge25vbV9tYXJjYTogJycsIGRhdF9jYWRhc3RybzogJycsIGRlc19jb3I6ICcnLCBkZXNfcHJvZHV0bzogJyd9LAogICAgICAgICAgICBncmFkZXNfc2VsZWN0ZWQ6IFtdLAogICAgICAgICAgICBncmFkZV9lc3RvcXVlX3RvdGFpczoge30sCiAgICAgICAgICAgIHNvbWFfZGVsZXRhcjoge30sCiAgICAgICAgICAgIGdyYWRlc19vcHRpb25zOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiAnQ2Fsw6dhZG8gQmViw6onLAogICAgICAgICAgICAgICAgICAgICJncmFkZSI6IFt7a2V5OiAnMScsIGxhYmVsOiAnMSd9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMicsIGxhYmVsOiAnMid9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMycsIGxhYmVsOiAnMyd9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnNCcsIGxhYmVsOiAnNCd9XQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAibmFtZSI6ICdSb3VwYSBJbmZhbnRpbCBQSS1NSS1HSScsCiAgICAgICAgICAgICAgICAgICAgImdyYWRlIjogWwogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnUEknLCBsYWJlbDogJ1BJJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICdNSScsIGxhYmVsOiAnTUknfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJ0dJJywgbGFiZWw6ICdHSSd9XQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAibmFtZSI6ICdDYWzDp2FkbyBJbmZhbnRpbCcsCiAgICAgICAgICAgICAgICAgICAgImdyYWRlIjogWwogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMTUnLCBsYWJlbDogJzE1J30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICcxNicsIGxhYmVsOiAnMTYnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzE3JywgbGFiZWw6ICcxNyd9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMTgnLCBsYWJlbDogJzE4J30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICcxOScsIGxhYmVsOiAnMTknfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzIwJywgbGFiZWw6ICcyMCd9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMjEnLCBsYWJlbDogJzIxJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICcyMicsIGxhYmVsOiAnMjInfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzIzJywgbGFiZWw6ICcyMyd9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMjQnLCBsYWJlbDogJzI0J30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICcyNScsIGxhYmVsOiAnMjUnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzI2JywgbGFiZWw6ICcyNid9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMjcnLCBsYWJlbDogJzI3J30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICcyOCcsIGxhYmVsOiAnMjgnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzI5JywgbGFiZWw6ICcyOSd9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMzAnLCBsYWJlbDogJzMwJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICczMScsIGxhYmVsOiAnMzEnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzMyJywgbGFiZWw6ICczMid9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMzMnLCBsYWJlbDogJzMzJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICczNCcsIGxhYmVsOiAnMzQnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzM1JywgbGFiZWw6ICczNSd9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMzYnLCBsYWJlbDogJzM2J31dCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJuYW1lIjogJ1JvdXBhIEluZmFudGlsIDgtMTYnLAogICAgICAgICAgICAgICAgICAgICJncmFkZSI6IFsKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzgnLCBsYWJlbDogJzgnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzEwJywgbGFiZWw6ICcxMCd9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMTInLCBsYWJlbDogJzEyJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICcxNCcsIGxhYmVsOiAnMTQnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzE2JywgbGFiZWw6ICcxNid9XQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAibmFtZSI6ICdDYWzDp2FkbyBJbmZhbnRpbCBEdXBsbycsCiAgICAgICAgICAgICAgICAgICAgImdyYWRlIjogW3trZXk6ICcxNy8xOCcsIGxhYmVsOiAnMTcvMTgnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzE5LzIwJywgbGFiZWw6ICcxOS8yMCd9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMjEvMjInLCBsYWJlbDogJzIxLzIyJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICcyMy8yNCcsIGxhYmVsOiAnMjMvMjQnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzI1LzI2JywgbGFiZWw6ICcyNS8yNid9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMjcvMjgnLCBsYWJlbDogJzI3LzI4J30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICcyOS8zMCcsIGxhYmVsOiAnMjkvMzAnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzMxLzMyJywgbGFiZWw6ICczMS8zMid9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMzMvMzQnLCBsYWJlbDogJzMzLzM0J30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICczNS8zNicsIGxhYmVsOiAnMzUvMzYnfV0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiAnUm91cGEgQWR1bHRvIFBQJywKICAgICAgICAgICAgICAgICAgICAiZ3JhZGUiOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICdQUCcsIGxhYmVsOiAnUFAnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJ0VQJywgbGFiZWw6ICdFUCd9LF0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiAnQ2Fsw6dhZG8gQWR1bHRvJywKICAgICAgICAgICAgICAgICAgICAiZ3JhZGUiOiBbe2tleTogJzMzJywgbGFiZWw6ICczMyd9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMzQnLCBsYWJlbDogJzM0J30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICczNScsIGxhYmVsOiAnMzUnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzM2JywgbGFiZWw6ICczNid9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMzcnLCBsYWJlbDogJzM3J30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICczOCcsIGxhYmVsOiAnMzgnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzM5JywgbGFiZWw6ICczOSd9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnNDAnLCBsYWJlbDogJzQwJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICc0MScsIGxhYmVsOiAnNDEnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzQyJywgbGFiZWw6ICc0Mid9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnNDMnLCBsYWJlbDogJzQzJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICc0NCcsIGxhYmVsOiAnNDQnfV0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiAnUm91cGEgQWR1bHRvIDM0LTU2JywKICAgICAgICAgICAgICAgICAgICAiZ3JhZGUiOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICczNCcsIGxhYmVsOiAnMzQnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzM2JywgbGFiZWw6ICczNid9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMzgnLCBsYWJlbDogJzM4J30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICc0MCcsIGxhYmVsOiAnNDAnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzQyJywgbGFiZWw6ICc0Mid9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnNDQnLCBsYWJlbDogJzQ0J30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICc0NicsIGxhYmVsOiAnNDYnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzQ4JywgbGFiZWw6ICc0OCd9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnNTAnLCBsYWJlbDogJzUwJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICc1MicsIGxhYmVsOiAnNTInfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzU0JywgbGFiZWw6ICc1NCd9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnNTYnLCBsYWJlbDogJzU2J30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICc1OCcsIGxhYmVsOiAnNTgnfV0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiAnQ2Fsw6dhZG8gQWR1bHRvIER1cGxvJywKICAgICAgICAgICAgICAgICAgICAiZ3JhZGUiOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICczMy8zNCcsIGxhYmVsOiAnMzMvMzQnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzM1LzM2JywgbGFiZWw6ICczNS8zNid9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMzcvMzgnLCBsYWJlbDogJzM3LzM4J30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICczOS80MCcsIGxhYmVsOiAnMzkvNDAnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzQxLzQyJywgbGFiZWw6ICc0MS80Mid9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnNDMvNDQnLCBsYWJlbDogJzQzLzQ0J30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICc0NS80NicsIGxhYmVsOiAnNDUvNDYnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzQ3LzQ4JywgbGFiZWw6ICc0Ny80OCd9XQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAibmFtZSI6ICdSb3VwYSBBZHVsdG8gUC1NLUctR0cnLAogICAgICAgICAgICAgICAgICAgICJncmFkZSI6IFsKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJ1AnLCBsYWJlbDogJ1AnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJ00nLCBsYWJlbDogJ00nfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJ0cnLCBsYWJlbDogJ0cnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJ0dHJywgbGFiZWw6ICdHRyd9XQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAibmFtZSI6ICdDYWzDp2FkbyBBZHVsdG8gQmlnJywKICAgICAgICAgICAgICAgICAgICAiZ3JhZGUiOiBbe2tleTogJzQ1JywgbGFiZWw6ICc0NSd9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnNDYnLCBsYWJlbDogJzQ2J30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICc0NycsIGxhYmVsOiAnNDcnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzQ4JywgbGFiZWw6ICc0OCd9XQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAibmFtZSI6ICdSb3VwYSBBZHVsdG8gWEdzJywKICAgICAgICAgICAgICAgICAgICAiZ3JhZGUiOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICdYRycsIGxhYmVsOiAnWEcnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJ1gxJywgbGFiZWw6ICdYMSd9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnWDInLCBsYWJlbDogJ1gyJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICdYMycsIGxhYmVsOiAnWDMnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJ0dHRycsIGxhYmVsOiAnR0dHJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICdFRycsIGxhYmVsOiAnRUcnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJ0VHRycsIGxhYmVsOiAnRUdHJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICdFWEdHJywgbGFiZWw6ICdFWEdHJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICdHMScsIGxhYmVsOiAnRzEnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJ0cyJywgbGFiZWw6ICdHMid9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnRzMnLCBsYWJlbDogJ0czJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICdHNCcsIGxhYmVsOiAnRzQnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzFHJywgbGFiZWw6ICcxRyd9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMkcnLCBsYWJlbDogJzJHJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICczRycsIGxhYmVsOiAnM0cnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzRHJywgbGFiZWw6ICc0Ryd9XQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAibmFtZSI6ICdDaW50bycsCiAgICAgICAgICAgICAgICAgICAgImdyYWRlIjogWwogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnOTAnLCBsYWJlbDogJzkwJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICc5NScsIGxhYmVsOiAnOTUnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzEwMCcsIGxhYmVsOiAnMTAwJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICcxMDUnLCBsYWJlbDogJzEwNSd9LAogICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnMTEwJywgbGFiZWw6ICcxMTAnfSwKICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJzExNScsIGxhYmVsOiAnMTE1J30sCiAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICcxMjAnLCBsYWJlbDogJzEyMCd9XQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAibmFtZSI6ICdJbWcgTGluaycsCiAgICAgICAgICAgICAgICAgICAgImdyYWRlIjoge2tleTogJ2ltZ19saW5rJywgbGFiZWw6ICdJbWcgTGluayd9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICBdLAogICAgICAgICAgICBpdGVtczpbXSwKICAgICAgICAgICAgbWFwcGVkX2l0ZW1zOiBbXSwKICAgICAgICAgICAgbWFyY2FzOiB7fSwKICAgICAgICAgICAgbXVsdGlTZWFyY2g6IHt9LAogICAgICAgICAgICBzdWdnZXN0aW9uX3NlbGVjdGVkOiB7CiAgICAgICAgICAgICAgICBjb2RfbWFyY2E6IDAsCiAgICAgICAgICAgICAgICBmb3JuZWNlZG9yZXM6IFt7ZmFuX2Zvcm5lY2Vkb3I6ICcnfV0sCiAgICAgICAgICAgICAgICBub21fbWFyY2E6ICJjYXJyZWdhbmRvIiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBkYXRhOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZF9tYXJjYTogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm5lY2Vkb3JlczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub21fbWFyY2E6ICJjYXJyZWdhbmRvIG1hcmNhcyIsCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIG1hcmNhc19zdWdnZXN0aW9uX3F1ZXJ5OiAiIgogICAgICAgIH07CiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBmaWx0ZXJlZERhdGEoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLm11bHRpU2VhcmNoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5maWx0ZXIoKGl0ZW0pID0+IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy5tdWx0aVNlYXJjaCkuZXZlcnkoKFtrZXksIHZhbHVlXSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuaW5jbHVkZXMoInwiKSAmJiAhdmFsdWUuaW5jbHVkZXMoIiEiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVsID0gdmFsdWUuc3BsaXQoInwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbC5zb21lKChlbGVtKSA9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpdGVtW2tleV0gfHwgIiIpLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKS5zdGFydHNXaXRoKGVsZW0udG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuc3Vic3RyaW5nKDAsIDEpID09PSAiISIgJiYgIXZhbHVlLmluY2x1ZGVzKCJ8IikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbCA9IHZhbHVlLnNwbGl0KCIhIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWwuc29tZSgoZWxlbSkgPT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhKGl0ZW1ba2V5XSB8fCAiIikudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpLnN0YXJ0c1dpdGgoZWxlbS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5pbmNsdWRlcygifCIpICYmIHZhbHVlLnN1YnN0cmluZygwLCAxKSA9PT0gIiEiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZWwgPSB2YWx1ZS5zcGxpdCgiISIpWzFdLnNwbGl0KCJ8Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWVsLnNvbWUoKGVsZW0pID0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGl0ZW1ba2V5XSB8fCAiIikudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpLnN0YXJ0c1dpdGgoZWxlbS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoa2V5ID09PSAiZGF0X2NhZGFzdHJvIiB8fCBrZXkgPT09ICJkYXRfdWx0Y29tcHJhIikgJiYgdmFsdWUuc3Vic3RyaW5nKDAsIDEpID09PSAiPCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbCA9IHZhbHVlLnNwbGl0KCI8Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbVtrZXldICE9PSAiICIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9tZW50KGl0ZW1ba2V5XSwgJ1lZWVktTU0tREQnKS50b0RhdGUoKSA8IG1vbWVudChlbFsxXSwgJ1lZWVktTU0tREQnKS50b0RhdGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGtleSA9PT0gImRhdF9jYWRhc3RybyIgfHwga2V5ID09PSAiZGF0X3VsdGNvbXByYSIpICYmIHZhbHVlLnN1YnN0cmluZygwLCAxKSA9PT0gIj4iKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZWwgPSB2YWx1ZS5zcGxpdCgiPiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1ba2V5XSAhPT0gIiAiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vbWVudChpdGVtW2tleV0sICdZWVlZLU1NLUREJykudG9EYXRlKCkgPiBtb21lbnQoZWxbMV0sICdZWVlZLU1NLUREJykudG9EYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLnN1YnN0cmluZygwLCAxKSA9PT0gIj4iKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZWwgPSB2YWx1ZS5zcGxpdCgiPiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1ba2V5XSAhPT0gIiAiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcihpdGVtW2tleV0gfHwgIiIpID4gZWxbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5zdWJzdHJpbmcoMCwgMSkgPT09ICI8IikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVsID0gdmFsdWUuc3BsaXQoIjwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtW2tleV0gIT09ICIgIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBOdW1iZXIoaXRlbVtrZXldIHx8ICIiKSA8IGVsWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5zdWJzdHJpbmcoMCwgMSkgPT09ICI9IikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVsID0gdmFsdWUuc3BsaXQoIj0iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoaXRlbVtrZXldIHx8ICIiKS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgPT09IGVsWzFdLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIC0gdHJ5aW5nIHRvIGltcGxlbWVudCBlc3RvcXVlX2hpc3RvcnkgZmlsdGVyCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoa2V5ID09PSAiZXN0b3F1ZV9oaXN0b3J5IikgJiYgdmFsdWUuc3Vic3RyaW5nKDAsIDEpID09PSAibSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxldCB0ZXN0ID0gaXRlbVtrZXldLm1hcChhID0+IGEuZGF0YV9tb3Z0byk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGVzdCcpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVsID0gdmFsdWUuc3BsaXQoIm0iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtW2tleV0gIT09ICIgIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJpdGVtW2tleV0iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW1ba2V5XSkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGl0ZW1ba2V5XS5maWx0ZXIoIGhpc3RvcnlfaXRlbSA9PiBtb21lbnQoaGlzdG9yeV9pdGVtLmRhdGFfbW92dG8sICdZWVlZLU1NLUREJykudG9EYXRlKCkgPCBtb21lbnQoZWxbMV0sICdZWVlZLU1NLUREJykudG9EYXRlKCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsZXQgcmVzdWx0ID0gaXRlbVtrZXldLmZpbHRlciggaGlzdG9yeV9pdGVtID0+IGhpc3RvcnlfaXRlbS5zYWlkYXMgPj0gLTUwICYmIGhpc3RvcnlfaXRlbS5zYWlkYXMgPD0gZWxbMV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coInJlc3VsdCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpdGVtW2tleV0ubWFwKGEgPT4gYS5zYWlkYXMpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxldCByZXRvcm5vID0gTnVtYmVyKGl0ZW1ba2V5XS5zYWlkYXMgfHwgIiIpIDwgZWxbMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygiaXRlbVtrZXldLnNhaWRhcyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaXRlbVtrZXldLnNhaWRhcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygicmV0b3JubyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmV0b3JubykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbVtrZXldLmZpbHRlciggaGlzdG9yeV9pdGVtID0+IG1vbWVudChoaXN0b3J5X2l0ZW0uZGF0YV9tb3Z0bywgJ1lZWVktTU0tREQnKS50b0RhdGUoKSA8IG1vbWVudChlbFsxXSwgJ1lZWVktTU0tREQnKS50b0RhdGUoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIGl0ZW1ba2V5XS5maWx0ZXIoIGhpc3RvcnlfaXRlbSA9PiBtb21lbnQoaGlzdG9yeV9pdGVtLmRhdGFfbW92dG8sICdZWVlZLU1NLUREJykudG9EYXRlKCkgPCBtb21lbnQoZWxbMV0sICdZWVlZLU1NLUREJykudG9EYXRlKCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGtleSA9PT0gImVzdG9xdWVfaGlzdG9yeSIpICYmIHZhbHVlLnN1YnN0cmluZygwLCAxKSA9PT0gIk0iKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsZXQgdGVzdCA9IGl0ZW1ba2V5XS5tYXAoYSA9PiBhLmRhdGFfbW92dG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Rlc3QnKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbCA9IHZhbHVlLnNwbGl0KCJNIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbVtrZXldICE9PSAiICIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiaXRlbVtrZXldIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtW2tleV0pCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBpdGVtW2tleV0uZmlsdGVyKCBoaXN0b3J5X2l0ZW0gPT4gbW9tZW50KGhpc3RvcnlfaXRlbS5kYXRhX21vdnRvLCAnWVlZWS1NTS1ERCcpLnRvRGF0ZSgpID4gbW9tZW50KGVsWzFdLCAnWVlZWS1NTS1ERCcpLnRvRGF0ZSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGV0IHJlc3VsdCA9IGl0ZW1ba2V5XS5maWx0ZXIoIGhpc3RvcnlfaXRlbSA9PiBoaXN0b3J5X2l0ZW0uc2FpZGFzID49IC01MCAmJiBoaXN0b3J5X2l0ZW0uc2FpZGFzIDw9IGVsWzFdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJyZXN1bHQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaXRlbVtrZXldLm1hcChhID0+IGEuc2FpZGFzKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsZXQgcmV0b3JubyA9IE51bWJlcihpdGVtW2tleV0uc2FpZGFzIHx8ICIiKSA8IGVsWzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIml0ZW1ba2V5XS5zYWlkYXMiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGl0ZW1ba2V5XS5zYWlkYXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coInJldG9ybm8iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJldG9ybm8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1ba2V5XS5maWx0ZXIoIGhpc3RvcnlfaXRlbSA9PiBtb21lbnQoaGlzdG9yeV9pdGVtLmRhdGFfbW92dG8sICdZWVlZLU1NLUREJykudG9EYXRlKCkgPCBtb21lbnQoZWxbMV0sICdZWVlZLU1NLUREJykudG9EYXRlKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBpdGVtW2tleV0uZmlsdGVyKCBoaXN0b3J5X2l0ZW0gPT4gbW9tZW50KGhpc3RvcnlfaXRlbS5kYXRhX21vdnRvLCAnWVlZWS1NTS1ERCcpLnRvRGF0ZSgpIDwgbW9tZW50KGVsWzFdLCAnWVlZWS1NTS1ERCcpLnRvRGF0ZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAodmFsdWUuc3Vic3RyaW5nKDAsIDEpID09PSAiPCIgJiYgKGtleSA9PT0gImRhdF9lc3RvcXVlX2hpc3RvcnlfaW5pIiB8fCBrZXkgPT09ICJkYXRfZXN0b3F1ZV9oaXN0b3J5X2ZpbSIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyB0aGlzLmp1c3RfZm9yX3Rlc3RpbmcgPSBpdGVtCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBsZXQgZWwgPSB2YWx1ZS5zcGxpdCgiPCIpOwogICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgaWYgKGl0ZW1ba2V5XSAhPT0gIiAiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuIG1vbWVudChpdGVtW2tleV0sICdZWVlZLU1NLUREJykudG9EYXRlKCkgPCBtb21lbnQoZWxbMV0sICdZWVlZLU1NLUREJykudG9EYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoaXRlbVtrZXldIHx8ICIiKS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkuaW5jbHVkZXModmFsdWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXM7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8vIHNhbGRvRXN0b3F1ZSgpIHsKICAgICAgICAvLwogICAgICAgIC8vIH0sCiAgICAgICAgLy9UT0RPIG1heWJlIG9uZSBjYW4gc3BlZWQgY29kZSB1cCB3aXRoIHJlZHVjZSBpbnN0ZWFkIG9mIG1hcCtmaWx0ZXIKICAgICAgICBtYXBwZWRJdGVtc0NvbXB1dGVkKCkgewogICAgICAgICAgICBjb25zdCBtYXBwZWRfaXRlbXMgPSB0aGlzLml0ZW1zLm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAuLi5pdGVtLAogICAgICAgICAgICAgICAgICAgIGVzdG9xdWVfaGlzdG9yeTogaXRlbS5lc3RvcXVlX2hpc3RvcnkuZmlsdGVyKChtb3Z0bykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YV9hdXggPSAgbmV3IERhdGUobW92dG8uZGF0YV9tb3Z0bykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFfYXV4ID4gdGhpcy5kYXRhX21vdnRvX2luaSAmJiBkYXRhX2F1eCA8IHRoaXMuZGF0YV9tb3Z0b19maW0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHJldHVybiBtYXBwZWRfaXRlbXMKICAgICAgICB9LAogICAgICAgIGZpbHRlcmVkSXRlbXNDb21wdXRlZCgpIHsKICAgICAgICAgICAgLy8gcmV0dXJuICBPYmplY3QuZnJlZXplKHRoaXMuZmlsdGVyZWRJdGVtc0J5RGVzY3JpcHRpb24odGhpcy5maWx0ZXJlZEl0ZW1zQnlDb3IodGhpcy5pdGVtcykpKQogICAgICAgICAgICByZXR1cm4gIHRoaXMuZmlsdGVyZWRJdGVtc0J5Q29yKHRoaXMuZmlsdGVyZWRJdGVtc0J5RGVzY3JpcHRpb24odGhpcy5pdGVtcykpCiAgICAgICAgICAgIC8vIHJldHVybiAgdGhpcy5maWx0ZXJlZEl0ZW1zQnlEZXNjcmlwdGlvbih0aGlzLmZpbHRlcmVkSXRlbXNCeUNvcih0aGlzLml0ZW1zKSkKICAgICAgICAgICAgLy8gcmV0dXJuIHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5kZXNfcHJvZHV0by50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRoaXMuZmlsdGVycy5kZXNfcHJvZHV0by50b0xvd2VyQ2FzZSgpKSkKICAgICAgICB9LAoKCiAgICAgICAgZmlsdGVyZWRtYXBwZWRJdGVtc0NvbXB1dGVkKCkgewogICAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gewogICAgICAgICAgICAvLyBjb25zdCBmaWx0ZXJlZCA9IHRoaXMubWFwcGVkSXRlbXNDb21wdXRlZC5maWx0ZXIoaXRlbSA9PiB7CiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhmaWx0ZXJlZCkKICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmZpbHRlcnMpLmV2ZXJ5KGtleSA9PnsKICAgICAgICAgICAgICAgICAgICBTdHJpbmcoaXRlbVtrZXldLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSkuaW5jbHVkZXModGhpcy5maWx0ZXJzW2tleV0udG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZpbHRlcmVkJykKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZmlsdGVyZWQpCiAgICAgICAgICAgIHJldHVybiBmaWx0ZXJlZAogICAgICAgICAgICAvLyByZXR1cm4gdGhpcy5pdGVtcwogICAgICAgIH0sCiAgICAgICAgY29tcHV0ZWRGaWVsZHMoKSB7CiAgICAgICAgICAgIC8vIHJldHVybiBbXS5jb25jYXQodGhpcy5iYXNlRmllbGRzLCB0aGlzLmFkdWx0b0ZpZWxkcywgdGhpcy52YWxvcmVzRmllbGRzKQogICAgICAgICAgICByZXR1cm4gW10uY29uY2F0KHRoaXMuYmFzZUZpZWxkcywgdGhpcy5ncmFkZUZpZWxkcywgdGhpcy52YWxvcmVzRmllbGRzKQogICAgICAgICAgICAvLyByZXR1cm4gW10uY29uY2F0KHRoaXMuYmFzZUZpZWxkcywgdGhpcy5ncmFkZUZpZWxkcywgdGhpcy50b3RhaXNGaWVsZHMsIHRoaXMudmFsb3Jlc0ZpZWxkcykKICAgICAgICB9LAogICAgICAgIGdyYWRlRmllbGRzKCkgewogICAgICAgICAgICB2YXIgZ3JhZGVzID0gdGhpcy5ncmFkZXNfc2VsZWN0ZWQubWFwKHNlbGVjdGVkID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZC5ncmFkZQogICAgICAgICAgICB9KQogICAgICAgICAgICAvLyByZXR1cm4gW10uY29uY2F0KGdyYWRlcy5mbGF0KDEpKSAvL21hbnRlciB0b3RhaXNGaWVsZHMgYXF1aSBwYXJhIHF1ZSBvcyB0b3RhaXMgZmlxdWVtIGNvcnJldG9zCiAgICAgICAgICAgIHJldHVybiBbXS5jb25jYXQoZ3JhZGVzLmZsYXQoMSksIHRoaXMudG90YWlzRmllbGRzKSAvL21hbnRlciB0b3RhaXNGaWVsZHMgYXF1aSBwYXJhIHF1ZSBvcyB0b3RhaXMgZmlxdWVtIGNvcnJldG9zCiAgICAgICAgICAgIC8vIHJldHVybiBbXS5jb25jYXQodGhpcy5pbmZhbnRvRmllbGRzLCB0aGlzLmFkdWx0b0ZpZWxkcywgdGhpcy50b3RhaXNGaWVsZHMpCiAgICAgICAgfSwKICAgICAgICBiYXNlRmllbGRzKCkgewogICAgICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAgICAge2tleTogJ3NlbGVjdGVkJywgbGFiZWw6ICdTZWwuJ30sCiAgICAgICAgICAgICAgICB7a2V5OiAnbm9tX21hcmNhJywgbGFiZWw6ICdOb20uIE1hcmNhJywgc29ydGFibGU6IHRydWV9LAogICAgICAgICAgICAgICAge2tleTogJ3Jhel9mb3JuZWNlZG9yJywgbGFiZWw6ICdGb3JuLicsIHNvcnRhYmxlOiB0cnVlfSwKICAgICAgICAgICAgICAgIHtrZXk6ICdkYXRfY2FkYXN0cm8nLCBsYWJlbDogJ0RhdGEgQ2FkLicsIHNvcnRhYmxlOiB0cnVlfSwKICAgICAgICAgICAgICAgIHtrZXk6ICdkYXRfdWx0Y29tcHJhJywgbGFiZWw6ICdEYXRhIFVsdENvbXByYScsIHNvcnRhYmxlOiB0cnVlfSwKICAgICAgICAgICAgICAgIHtrZXk6ICdlc3RvcXVlX2hpc3RvcnknLCBsYWJlbDogJ0VzdG9xSGlzdCd9LAogICAgICAgICAgICAgICAge2tleTogJ2VzdG9xdWVfaGlzdG9yeS5kYXRhX21vdnRvJywgbGFiZWw6ICdEYXRFc3RvcUZpbSd9LAogICAgICAgICAgICAgICAge2tleTogJ2NvZF9yZWZlcmVuY2lhJywgbGFiZWw6ICdSZWYuJywgc29ydGFibGU6IHRydWV9LAogICAgICAgICAgICAgICAge2tleTogJ2Rlc19jb3InLCBsYWJlbDogJ0NvcicsIHNvcnRhYmxlOiB0cnVlfSwKICAgICAgICAgICAgICAgIHtrZXk6ICdpbWcnLCBsYWJlbDogJ0ltZy4nfSwKICAgICAgICAgICAgICAgIHtrZXk6ICdpbWdfbGluaycsIGxhYmVsOiAnSW1nIExpbmsnfSwKICAgICAgICAgICAgICAgIHtrZXk6ICdkZXNfcHJvZHV0bycsIGxhYmVsOiAnRGVzY3Jpw6fDo28uJywgc29ydGFibGU6IHRydWV9LAogICAgICAgICAgICAgICAge2tleTogJ2FjdGlvbnMnLCBsYWJlbDogJysnfQogICAgICAgICAgICBdCiAgICAgICAgfSwKICAgICAgICB2YWxvcmVzRmllbGRzKCkgewogICAgICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAgICAgLy8ge2tleTogJ3RvdGFpcycsIGxhYmVsOiAnVG90LicsIHNvcnRhYmxlOiB0cnVlfSwKICAgICAgICAgICAgICAgIHtrZXk6ICd2bHJfY3VzdG9fYnJ1dG8nLCBsYWJlbDogJ0N1c3RvJywgc29ydGFibGU6IHRydWV9LAogICAgICAgICAgICAgICAge2tleTogJ3Zscl92ZW5kYTEnLCBsYWJlbDogJ1Zsci4gVmVuZGEnLCBzb3J0YWJsZTogdHJ1ZX0KICAgICAgICAgICAgXQogICAgICAgIH0sCiAgICAgICAgdG90YWlzRmllbGRzKCkgewogICAgICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAgICAge2tleTogJ3RvdGFpcycsIGxhYmVsOiAnVG90LicsIHNvcnRhYmxlOiB0cnVlfSwKICAgICAgICAgICAgICAgIHtrZXk6ICdzYWlkYXMnLCBsYWJlbDogJ1Nhw61kYXMuJywgc29ydGFibGU6IHRydWV9CiAgICAgICAgICAgIF0KICAgICAgICB9LAogICAgICAgIGZpbHRlcmVkT3B0aW9ucygpIHsKICAgICAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAvLyBkYXRhOiB0aGlzLm1hcmNhcwogICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuc3VnZ2VzdGlvbnNbMF0uZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKG9wdGlvbiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gJ2EnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9uLm5vbV9tYXJjYS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodGhpcy5tYXJjYXNfc3VnZ2VzdGlvbl9xdWVyeS50b0xvd2VyQ2FzZSgpKSA+IC0xOwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZpbHRlcmVkX2l0ZW1zID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcHBlZF9pdGVtcyA9IGZpbHRlcmVkX2l0ZW1zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcHBlZF9pdGVtczsKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXTsKICAgICAgICB9CgogICAgICAgIC8vIGdyYWRlVG90YWxzKCkgewogICAgICAgIC8vICAgICBsZXQgc3VtID0gdGhpcy5maWx0ZXJlZEl0ZW1zQ29tcHV0ZWQucmVkdWNlKGZ1bmN0aW9uIChzdW0sIGl0ZW0pIHsKICAgICAgICAvLyAgICAgbGV0IGl0ZW1WYWxvciA9IHBhcnNlRmxvYXQoaXRlbS5ncmFkZV9lc3RvcXVlWzBdKQogICAgICAgIC8vICAgICBpZiAoIWlzTmFOKGl0ZW1WYWxvcikpIHsKICAgICAgICAvLyAgICAgICAgIHJldHVybiBzdW0gKyBpdGVtVmFsb3IKICAgICAgICAvLyAgICAgfSBlbHNlIHsKICAgICAgICAvLyAgICAgICAgIHJldHVybiBzdW0KICAgICAgICAvLyAgICAgfQogICAgICAgIC8vIH0sIDApCiAgICAgICAgLy8gcmV0dXJuIHN1bQogICAgICAgIC8vIH0KICAgIH0sCgogICAgYmVmb3JlTW91bnQoKSB7CiAgICAgICAgdGhpcy5sb2FkTWFyY2FzKCkKICAgICAgICAvLyB0aGlzLmdyYWRlX2VzdG9xdWVfdG90YWlzPSB7JzMzJzowfQogICAgICAgIC8vIHRoaXMudXBkYXRlRXN0b3F1ZVByb2R1dG9zKCkKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgZmlsdGVyZWRJdGVtc0J5RGVzY3JpcHRpb246ZnVuY3Rpb24oaXRlbXMpewogICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtcykKICAgICAgICAgICAgLy8gcmV0dXJuIGl0ZW1zLmZpbHRlcihpdGVtID0+ICFpdGVtLmRlc19wcm9kdXRvLnRvTG93ZXJDYXNlKCkuaW5kZXhPZih0aGlzLmZpbHRlcnMuZGVzX3Byb2R1dG8pKQogICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5maWx0ZXIoaXRlbSA9PiAoaXRlbS5kZXNfcHJvZHV0b3x8JycpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGhpcy5maWx0ZXJzLmRlc19wcm9kdXRvLnRvTG93ZXJDYXNlKCkpKX0sCiAgICAgICAgICAgIC8vIHJldHVybiBpdGVtcy5maWx0ZXIoaXRlbSA9PiAhaXRlbS5kZXNfcHJvZHV0by50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRoaXMuZmlsdGVycy5kZXNfcHJvZHV0bykpCiAgICAgICAgLy8gICAgVE9ETwogICAgICAgIC8vICAgIGRlc19jb3IgaW4gRkVSUkFDSU5JID0gbnVsbCBzb21ldGltZXMsIGZpbmQgYSB3YXkgdG8gYnlwYXNzCiAgICAgICAgLy8gICAgY2hhaW5pbmcgZmlsdGVycyBsaWtlIGJlbG93IG1pZ2h0IHdvcmsKICAgICAgICAvLyAgICBodHRwczovLzViYWxsb29ucy5pbmZvL2NvbWJpbmluZy1tdWx0aXBsZS1maWx0ZXJzLW9uLWxpc3QtdXNpbmctY29tcHV0ZWQtcHJvcGVydGllcy1pbi12dWVqcy8KICAgICAgICBmaWx0ZXJlZEl0ZW1zQnlDb3I6ZnVuY3Rpb24oaXRlbXMpewogICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtcykKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gKGl0ZW0uZGVzX2Nvcnx8JycpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGhpcy5maWx0ZXJzLmRlc19jb3IudG9Mb3dlckNhc2UoKSkpfSwKCiAgICAgICAgLy8gY29uc3QgZmlsdGVyZWQgPSB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+IHsKICAgICAgICAvLyAgICAgLy8gY29uc3QgZmlsdGVyZWQgPSB0aGlzLm1hcHBlZEl0ZW1zQ29tcHV0ZWQuZmlsdGVyKGl0ZW0gPT4gewogICAgICAgIC8vICAgICAvLyAgICAgY29uc29sZS5sb2coZmlsdGVyZWQpCiAgICAgICAgLy8gICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5maWx0ZXJzKS5ldmVyeShrZXkgPT57CiAgICAgICAgLy8gICAgICAgICAgICAgU3RyaW5nKGl0ZW1ba2V5XS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpLmluY2x1ZGVzKHRoaXMuZmlsdGVyc1trZXldLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSkKICAgICAgICAvLyAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICkKICAgICAgICAvLyAgICAgfSkKCgoKCiAgICAgICAgcmVjZWl2ZURhdGFNb3Z0b0luaSh2YWx1ZSkgewogICAgICAgICAgICB0aGlzLmRhdGFfbW92dG9faW5pID0gdmFsdWUKICAgICAgICB9LAogICAgICAgIHJlY2VpdmVEYXRhTW92dG9GaW0odmFsdWUpIHsKICAgICAgICAgICAgdGhpcy5kYXRhX21vdnRvX2ZpbSA9IHZhbHVlCiAgICAgICAgfSwKICAgICAgICBsb2FkTWFyY2FzKCkgewogICAgICAgICAgICBjb25zdCBwYXRoID0gYC9hcGkvcmVhZC9tYXJjYXMvYDsKICAgICAgICAgICAgLy8gY29uc3QgcGF0aCA9IGBodHRwOi8vbG9jYWxob3N0L2FwaS9yZWFkL21hcmNhcy9gOyAvL3RoaXMgd2F5IHdvcmtzCiAgICAgICAgICAgIGF4aW9zLmdldChwYXRoKQogICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZXNfbWFyY2FzJyk7CiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLm1hcmNhcyA9IHJlcy5kYXRhCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWdnZXN0aW9uc1swXS5kYXRhID0gcmVzLmRhdGEKICAgICAgICAgICAgICAgICAgICBPYmplY3QuZnJlZXplKHRoaXMuc3VnZ2VzdGlvbnMpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmRhdGEpOyAvLyA9PiB0aGUgcmVzcG9uc2UgcGF5bG9hZAogICAgICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGNsaWNrSGFuZGxlcihpdGVtKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pCiAgICAgICAgICAgIC8vIGV2ZW50IGZpcmVkIHdoZW4gY2xpY2tpbmcgb24gdGhlIGlucHV0CiAgICAgICAgfSwKICAgICAgICBvblNlbGVjdGVkKGl0ZW0pIHsKICAgICAgICAgICAgdGhpcy5zdWdnZXN0aW9uX3NlbGVjdGVkID0gaXRlbS5pdGVtOwogICAgICAgICAgICAvLyB0aGlzLmZvcm1fc2VsZWN0ZWQgPSB0aGlzLmF2YWlsYWJsZUZvcm5lY2Vkb3JlcwogICAgICAgIH0sCiAgICAgICAgb25JbnB1dENoYW5nZSh0ZXh0KSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRleHQpCiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiBUaGlzIGlzIHdoYXQgdGhlIDxpbnB1dC8+IHZhbHVlIGlzIHNldCB0byB3aGVuIHlvdSBhcmUgc2VsZWN0aW5nIGEgc3VnZ2VzdGlvbi4KICAgICAgICAgKi8KICAgICAgICBnZXRTdWdnZXN0aW9uVmFsdWUoc3VnZ2VzdGlvbikgewogICAgICAgICAgICByZXR1cm4gc3VnZ2VzdGlvbi5pdGVtLm5vbV9tYXJjYTsKICAgICAgICB9LAogICAgICAgIGZvY3VzTWUoZSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlKSAvLyBGb2N1c0V2ZW50CiAgICAgICAgfSwKICAgICAgICBlc3RvcXVlSGlzdG9yeUJvdW5kRGF0ZXMob2JqZWN0KSB7CiAgICAgICAgICAgIHZhciBkYXRlX2FycmF5ID0gT2JqZWN0LmtleXMob2JqZWN0KQogICAgICAgICAgICB2YXIgZGF0ZV9kaWZmX21pbiA9IDA7CiAgICAgICAgICAgIHZhciBkYXRlX2RpZmZfbWF4ID0gMDsKICAgICAgICAgICAgdmFyIGVzdG9xdWVfaGlzdG9yeV9ib3VuZF9kYXRlcyA9IHsKICAgICAgICAgICAgICAgICdkYXRhX2luaSc6IHRoaXMuZGVmYXVsdF9kYXRlLAogICAgICAgICAgICAgICAgJ2RhdGFfZmltJzogdGhpcy5kZWZhdWx0X2RhdGUKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHRoaXMuZGF0YV9tb3Z0b19pbmkgPCB0aGlzLmRhdGFfbW92dG9fZmltKSB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGVfYXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBkYXRlX2RpZmZfbWluID0gbmV3IERhdGUoZGF0ZV9hcnJheVtpXSkgLSB0aGlzLmRhdGFfbW92dG9faW5pOwogICAgICAgICAgICAgICAgICAgIGlmIChkYXRlX2RpZmZfbWluID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVzdG9xdWVfaGlzdG9yeV9ib3VuZF9kYXRlcy5kYXRhX2luaSA9IGRhdGVfYXJyYXlbaSAtIDFdCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGRhdGVfYXJyYXkubGVuZ3RoOyBpID4gMDsgaS0tKSB7CiAgICAgICAgICAgICAgICAgICAgZGF0ZV9kaWZmX21heCA9IG5ldyBEYXRlKGRhdGVfYXJyYXlbaV0pIC0gdGhpcy5kYXRhX21vdnRvX2ZpbTsKICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZV9kaWZmX21heCA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgZXN0b3F1ZV9oaXN0b3J5X2JvdW5kX2RhdGVzLmRhdGFfZmltID0gZGF0ZV9hcnJheVtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBlc3RvcXVlX2hpc3RvcnlfYm91bmRfZGF0ZXMKICAgICAgICB9LAogICAgICAgIGdyYWRlVG90YWxzKG9iamVjdCkgewogICAgICAgICAgICBsZXQgdG90YWlzX0UgPSBPYmplY3Qua2V5cyhvYmplY3QpLnJlZHVjZShmdW5jdGlvbiAoc3VtLCBrZXkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBzdW0gKyAoa2V5LnNsaWNlKC0xKSA9PSAnRScgJiYgb2JqZWN0W2tleV0pOwogICAgICAgICAgICB9LCAwKTsKCiAgICAgICAgICAgIGxldCB0b3RhaXMgPSBPYmplY3Qua2V5cyhvYmplY3QpLnJlZHVjZShmdW5jdGlvbiAoc3VtLCBrZXkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBzdW0gKyAoa2V5LnNsaWNlKC0xKSAhPT0gJ0UnICYmIG9iamVjdFtrZXldKTsKICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgIHJldHVybiB7J3RvdGFpc19FJzp0b3RhaXNfRSwgJ3RvdGFpcyc6IHRvdGFpc30KICAgICAgICB9LAogICAgICAgIGdyYWRlRXN0b3F1ZShvYmplY3QpIHsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2cob2JqZWN0KQogICAgICAgICAgICB2YXIgZ3JhZGVfZXN0b3F1ZSA9IE9iamVjdC52YWx1ZXMob2JqZWN0KQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygiZ3JhZGVfZXN0b3F1ZSIpCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGdyYWRlX2VzdG9xdWUpCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJncmFkZV9lc3RvcXVlW2dyYWRlX2VzdG9xdWUubGVuZ2h0IC0gMV0iKQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhncmFkZV9lc3RvcXVlW2dyYWRlX2VzdG9xdWUubGVuZ2h0IC0gMV0pCiAgICAgICAgICAgIHJldHVybiBncmFkZV9lc3RvcXVlW2dyYWRlX2VzdG9xdWUubGVuZ2h0IC0gMV0KCiAgICAgICAgfSwKbm9ybWFsaXplU3RyaW5nKHMpIHsKICByZXR1cm4gYCR7c31gLnRyaW0oKS50b0xvd2VyQ2FzZSgpOwp9LApmaWx0ZXJGbihyb3cpIHsKICByZXR1cm4gdGhpcy5maWx0ZXIuc3BsaXQoJywnKQogICAgLm1hcCh0aGlzLm5vcm1hbGl6ZVN0cmluZykKICAgIC5zb21lKAogICAgICB0ZXJtID0+IE9iamVjdC52YWx1ZXMocm93KQogICAgICAgIC5tYXAodGhpcy5ub3JtYWxpemVTdHJpbmcpCiAgICAgICAgLnNvbWUoCiAgICAgICAgICB2YWwgPT4gdmFsLmluZGV4T2YodGVybSkgPiAtMQogICAgICAgICkKICAgICk7Cn0sCiAgICAgICAgZXhwYW5kQWRkaXRpb25hbEluZm8ocm93KSB7CiAgICAgICAgICAgIHJvdy5fc2hvd0RldGFpbHMgPSAhcm93Ll9zaG93RGV0YWlsczsKICAgICAgICB9LAogICAgICAgIHJlYWRQcm9kdXRvc0Zyb21Nb25nbygpIHsKICAgICAgICAgICAgY29uc3QgcGF0aCA9IGAvYXBpL2VzdG9xdWUvcmVhZF9wcm9kdXRvc19mcm9tX21vbmdvX2RiX3Rlc3QvJHt0aGlzLnN1Z2dlc3Rpb25fc2VsZWN0ZWQuY29kX21hcmNhfWAKICAgICAgICAgICAgLy8gY29uc3QgcGF0aCA9IGAvYXBpL2VzdG9xdWUvcmVhZF9wcm9kdXRvc19mcm9tX21vbmdvX2RiLyR7dGhpcy5jb2RfbWFyY2F9YAogICAgICAgICAgICBjb25zb2xlLmxvZyhwYXRoKQogICAgICAgICAgICBheGlvcy5nZXQocGF0aCkKICAgICAgICAgICAgICAgIC50aGVuKChwcm9kdXRvcykgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJwcm9kdXRvcyIpCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocHJvZHV0b3MpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcyA9IHByb2R1dG9zLmRhdGEKICAgICAgICAgICAgICAgICAgICBPYmplY3QuZnJlZXplKHRoaXMuaXRlbXMpCiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coInRoaXMuaXRlbXMiKQogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuaXRlbXMpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHJlYWRQcm9kdXRvc0Zyb21Nb25nb1dpdGhGaWx0ZXIoKSB7CiAgICAgICAgICAgIC8vIGNvbnN0IHBhdGggPSBgL2FwaS9lc3RvcXVlL3JlYWRfcHJvZHV0b3NfZnJvbV9tb25nb19kYl9maWx0ZXIvJHt0aGlzLnN1Z2dlc3Rpb25fc2VsZWN0ZWQuY29kX21hcmNhfS8ke3RoaXMuZmlsdGVycy5kZXNfcHJvZHV0b31gCiAgICAgICAgICAgIC8vIHRoaXMuZGF0YV9tb3Z0b19pbmkgPSAnMjAwMC0wMS0wMSAwMTowMTowMS4wMDAwMDAnCiAgICAgICAgICAgIC8vIHRoaXMuZGF0YV9tb3Z0b19maW0gPSAnMjAyMC0wMS0wMSAwMTowMTowMS4wMDAwMDAnCiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBgL2FwaS9lc3RvcXVlL3JlYWRfcHJvZHV0b3NfZnJvbV9tb25nb19kYl9iZWFuaWUvJHt0aGlzLnN1Z2dlc3Rpb25fc2VsZWN0ZWQuY29kX21hcmNhfS8ke3RoaXMuZGF0YV9tb3Z0b19pbml9LyR7dGhpcy5kYXRhX21vdnRvX2ZpbX1gCiAgICAgICAgICAgIC8vIGNvbnN0IHBhdGggPSBgL2FwaS9lc3RvcXVlL3JlYWRfcHJvZHV0b3NfZnJvbV9tb25nb19kYi8ke3RoaXMuY29kX21hcmNhfWAKICAgICAgICAgICAgY29uc29sZS5sb2cocGF0aCkKICAgICAgICAgICAgYXhpb3MuZ2V0KHBhdGgpCiAgICAgICAgICAgICAgICAudGhlbigocHJvZHV0b3MpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygicHJvZHV0b3MiKQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb2R1dG9zKQogICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSBwcm9kdXRvcy5kYXRhCiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmZyZWV6ZSh0aGlzLml0ZW1zKQogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJ0aGlzLml0ZW1zIikKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLml0ZW1zKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICB1cGRhdGVFc3RvcXVlUHJvZHV0b3MoKSB7CiAgICAgICAgICAgIC8vIHRoaXMuZGF0YV9tb3Z0b19pbmkgPSAnMjAwMC0wMS0wMVQxMSUzQTE4JTNBMjYuOTg5MDAwJwogICAgICAgICAgICB0aGlzLmRhdGFfbW92dG9faW5pID0gJzIwMDAtMDEtMDEgMDE6MDE6MDEuMDAwMDAwJwogICAgICAgICAgICAvLyB0aGlzLmRhdGFfbW92dG9faW5pID0gbW9tZW50KG5ldyBEYXRlKS5mb3JtYXQoJ1lZWVktTU0tRERUSEg6bW06c3MuU1NTU1NTJykKICAgICAgICAgICAgdGhpcy5jb2RfbWFyY2EgPSAnNTY3JwoKICAgICAgICAgICAgY29uc3QgcGF0aCA9IGAvYXBpL2VzdG9xdWUvcmVhZF9wcm9kdXRvc19mcm9tX3Bvc3RncmVzX2RiLyR7dGhpcy5jb2RfbWFyY2F9LyR7dGhpcy5kYXRhX21vdnRvX2luaX1gCiAgICAgICAgICAgIGF4aW9zLmdldChwYXRoKQogICAgICAgICAgICAgICAgLnRoZW4oKHByb2R1dG9zX2RhX21hcmNhKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coInByb2R1dG9zX2RhX21hcmNhIikKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9kdXRvc19kYV9tYXJjYSkKICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLml0ZW1zID0gcHJvZHV0b3NfZGFfbWFyY2EuZGF0YQogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJ0aGlzLml0ZW1zIikKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLml0ZW1zKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBkYXRlU29ydGVyKGEsIGIsIGtleSkgewoKICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2RhdF91bHRjb21wcmEnIHx8IGtleSA9PT0gJ2RhdF9jYWRhc3Rybyd8fCBrZXkgPT09ICdkYXRhX21vdnRvJykgewogICAgICAgICAgICAgICAgaWYgKG1vbWVudChhW2tleV0sICdERC9NTS9ZWVlZJykudG9EYXRlKCkgPiBtb21lbnQoYltrZXldLCAnREQvTU0vWVlZWScpLnRvRGF0ZSgpKSByZXR1cm4gMTsKICAgICAgICAgICAgICAgIGlmIChtb21lbnQoYVtrZXldLCAnREQvTU0vWVlZWScpLnRvRGF0ZSgpIDwgbW9tZW50KGJba2V5XSwgJ0REL01NL1lZWVknKS50b0RhdGUoKSkgcmV0dXJuIC0xOwogICAgICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2UgICAgICAgLy8gSWYgZmllbGQgaXMgbm90IGBkYXRlYCB3ZSBsZXQgYi10YWJsZSBoYW5kbGUgdGhlIHNvcnRpbmcKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICB9LAogICAgd2F0Y2g6IHsKICAgIH0KfQo="},{"version":3,"sources":["Estoque_test.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Estoque_test.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div class=\"levantamento-row\">\r\n        <b-row>\r\n            <b-col sm=\"2\">\r\n\r\n                <b-form @submit.stop.prevent=\"readProdutosFromMongoWithFilter\">\r\n                    <b-button type=\"submit\" variant=\"primary\">Mongo Estoque Produtos with Filter</b-button>\r\n                </b-form>\r\n                <b/>\r\n                <b-form @submit.stop.prevent=\"readProdutosFromMongo\">\r\n                    <div class=\"autosuggest\">\r\n                            <b>Marca: </b>\r\n                            <vue-autosuggest\r\n                                    :get-suggestion-value=\"getSuggestionValue\"\r\n                                    :input-props=\"{id:'autosuggest__input', placeholder:'Digite a marca', class:'form-control'}\"\r\n                                    :suggestions=\"filteredOptions\" @click=\"clickHandler\" @focus=\"focusMe\"\r\n                                    @input=\"onInputChange\"\r\n                                    @selected=\"onSelected\"\r\n                                    v-model=\"marcas_suggestion_query\">\r\n                                <div class=\"autosuggest-container-results\" slot-scope=\"{suggestion}\"\r\n                                     style=\" align-items: center;\">\r\n                                    <div> {{suggestion.item.nom_marca}} ({{suggestion.item.cod_marca}})</div>\r\n                                </div>\r\n                            </vue-autosuggest>\r\n                        </div>\r\n\r\n                    <b-button type=\"submit\" variant=\"primary\">Read Produtos From Mongo</b-button>\r\n                </b-form>\r\n            </b-col>\r\n            <b-col sm=\"2\">\r\n                    <b-row>\r\n                        <label>Data Movto inicial: </label>\r\n                        <mydatepicker-ini :datepicker_default=\"datepicker_ini\" @childToParent=\"receiveDataMovtoIni\"  placeholder=\"Selecione a data\"/>\r\n                        <br><br>\r\n                    </b-row>\r\n                    <b-row>\r\n                        <label>Data Movto final: </label>\r\n                        <mydatepicker-fim :datepicker_default=\"datepicker_fim\" @childToParent=\"receiveDataMovtoFim\"  placeholder=\"Selecione a data\"/>\r\n                        <br><br>\r\n\r\n                    </b-row>\r\n                </b-col>\r\n            <b-col>\r\n                <div id=\"grades_check_box\">\r\n                        <b-row>\r\n                        <b-col :key=\"grade.name\" sm=\"6\" v-for=\"grade in grades_options\">\r\n\r\n                            <div class='form-check form-switch'>\r\n                                <div>\r\n                                    <input :value=\"grade\" class='form-check-input' type=\"checkbox\"\r\n                                           v-model=\"grades_selected\"/>\r\n                                    <label class='form-check-label'>{{grade.name}}</label>\r\n                                    <!--                        <br>-->\r\n                                </div>\r\n                            </div>\r\n\r\n                        </b-col>\r\n                    </b-row>\r\n                </div>\r\n            </b-col>\r\n        </b-row>\r\n        <b-row>\r\n            <b-input v-model=\"filter\" placeholder=\"Filtros OU separados por vÃ­rgulas\"></b-input>\r\n            <!--            <b-table :bordered=\"true\" :fields=\"computedFields\" :filter=\"filter\" :items=\"items\" :filter-function=\"filterFn\"-->\r\n<!--            <b-table :bordered=\"true\" :fields=\"computedFields\" :filter=\"filter\" :items=\"filteredItemsComputed\" :filter-function=\"filterFn\"-->\r\n            <b-table :bordered=\"true\" :fields=\"computedFields\" :filter=\"filter\" :items=\"filteredData\" :filter-function=\"filterFn\"\r\n                 :small=true\r\n                  @row-clicked=\"expandAdditionalInfo\" class=\"text-right\" head-variant=\"light\" hover sticky-header=\"700px\" striped>\r\n<!--                 :sort-compare=\"dateSorter\" @row-clicked=\"expandAdditionalInfo\" class=\"text-right\" head-variant=\"light\" hover sticky-header=\"700px\" striped>-->\r\n\r\n            <template v-for=\"field in gradeFields\" v-slot:[`cell(${field.key})`]=\"{ item }\">\r\n                <div v-if=\"item.estoque_history[item.estoque_history.length-1]\"><!-- eslint-disable-line-->\r\n                    {{item.estoque_history[item.estoque_history.length-1].grade_estoque[field.key+\"_E\"]}}<br>\r\n                <b>{{item.estoque_history[item.estoque_history.length-1].grade_estoque[field.key]}}</b>\r\n                </div>\r\n\r\n\r\n                    <div v-if=\"grade_estoque_totais[field.key+'_E']\"><!-- eslint-disable-line-->\r\n                        {{grade_estoque_totais[field.key+\"_E\"] = grade_estoque_totais[field.key+\"_E\"] + item.estoque_history[item.estoque_history.length-1].grade_estoque[field.key+\"_E\"]}}\r\n                    </div>\r\n                    <div v-else><!-- eslint-disable-line-->\r\n                        {{grade_estoque_totais[field.key+\"_E\"] = item.estoque_history[item.estoque_history.length-1].grade_estoque[field.key+\"_E\"]}}\r\n                    </div>\r\n                    <div v-if=\"grade_estoque_totais[field.key]\"><!-- eslint-disable-line-->\r\n                        {{grade_estoque_totais[field.key] = item.estoque_history[item.estoque_history.length-1].grade_estoque[field.key]}}\r\n                    </div>\r\n                    <div v-else><!-- eslint-disable-line-->\r\n                        {{grade_estoque_totais[field.key] = item.estoque_history[item.estoque_history.length-1].grade_estoque[field.key]}}\r\n                    </div>\r\n\r\n            </template>\r\n\r\n<!--                <template v-slot:cell(estoque_history)=\"data\">-->\r\n<!--&lt;!&ndash;                    <div v-if=\"data.item.estoque_history\">&ndash;&gt;-->\r\n<!--                    {{data.item.estoque_history}}-->\r\n<!--&lt;!&ndash;                    </div>&ndash;&gt;-->\r\n<!--                </template>-->\r\n\r\n\r\n                <template v-slot:cell(saidas)=\"data\">\r\n                    <div v-if=\"data.item.estoque_history[data.item.estoque_history.length-1]\">\r\n                    {{data.item.estoque_history[0].saidas - data.item.estoque_history[data.item.estoque_history.length-1].saidas}}\r\n                    </div>\r\n                </template>\r\n\r\n                <template v-slot:cell(totais)=\"data\">\r\n                    <div v-if=\"data.item.estoque_history[data.item.estoque_history.length-1]\">\r\n                        {{data.item.estoque_history[data.item.estoque_history.length-1].saldo_estoque_e - data.item.estoque_history[0].saldo_estoque_e}}<br>\r\n                     <b>{{data.item.estoque_history[data.item.estoque_history.length-1].saldo_estoque}}</b>\r\n                    </div>\r\n\r\n\r\n                </template>\r\n\r\n                <template scope=\"data\" slot=\"top-row\" ><!-- eslint-disable-line-->\r\n                <td :key=\"field.key\" v-for=\"field in [...baseFields,...gradeFields,...valoresFields]\">\r\n                    <template v-if=\"field.key==='nom_marca'||field.key==='raz_fornecedor'||field.key==='dat_cadastro'||field.key==='dat_ultcompra'||field.key==='estoque_history'||field.key==='cod_referencia'||field.key==='des_cor'||field.key==='des_produto'||field.key==='vlr_custo_bruto'||field.key==='vlr_venda1'\">\r\n                        <b-form-input :placeholder=\"field.label\" class=\"col-sm\" v-model=\"multiSearch[field.key]\"></b-form-input>\r\n<!--                        <b-form-input :placeholder=\"field.label\" class=\"col-sm\" v-model=\"filters[field.key]\"></b-form-input>-->\r\n                    </template>\r\n                    <template v-else>\r\n<!--                        {{this.grade_estoque_totais}}-->\r\n                        <div v-if=\"grade_estoque_totais[field.key+'_E'] && grade_estoque_totais[field.key]\">\r\n                            <b>{{grade_estoque_totais[field.key+\"_E\"]}}</b>\r\n                            {{grade_estoque_totais[field.key]}}\r\n                        </div>\r\n                    </template>\r\n                </td>\r\n                </template>\r\n\r\n\r\n\r\n\r\n            </b-table>\r\n        </b-row>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {VueAutosuggest} from 'vue-autosuggest'\r\n    import axios from \"axios\";\r\n    import moment from \"moment\";\r\n    // import DatePicker from 'vue2-datepicker'\r\n    import 'vue2-datepicker/index.css'\r\n    import 'vue2-datepicker/locale/pt-br'\r\n    import Mydatepicker from '../components/Mydatepicker'\r\n    // import moment from \"moment\";\r\n\r\n    export default {\r\n        name: \"Estoque_test\",\r\n        components: {\r\n            'mydatepicker-ini': Mydatepicker,\r\n            'mydatepicker-fim': Mydatepicker,\r\n            'vue-autosuggest': VueAutosuggest\r\n        },\r\n        data() {\r\n            return {\r\n                a_just_for_testing:'',\r\n                cod_marca: 0, //olympikus = 567\r\n                // cod_marca: '567', //olympikus = 567\r\n                // data_movto_ini: new Date('2019-01-01 03:00:00.000'),\r\n                // data_movto_fim: new Date,\r\n                default_date: new Date('1900-01-01 01:00:00.000'),\r\n                datepicker_ini: new Date(1900, 0, 1),\r\n                datepicker_fim: new Date(2019, 11, 16),\r\n                data_movto_ini: '',\r\n                data_movto_fim: '',\r\n                // default_date: new Date('1900-01-01 01:00:00.000'),\r\n                filter: null,\r\n                filters: {nom_marca: '', dat_cadastro: '', des_cor: '', des_produto: ''},\r\n                grades_selected: [],\r\n                grade_estoque_totais: {},\r\n                soma_deletar: {},\r\n                grades_options: [\r\n                    {\r\n                        \"name\": 'CalÃ§ado BebÃª',\r\n                        \"grade\": [{key: '1', label: '1'},\r\n                            {key: '2', label: '2'},\r\n                            {key: '3', label: '3'},\r\n                            {key: '4', label: '4'}]\r\n                    },\r\n                    {\r\n                        \"name\": 'Roupa Infantil PI-MI-GI',\r\n                        \"grade\": [\r\n                            {key: 'PI', label: 'PI'},\r\n                            {key: 'MI', label: 'MI'},\r\n                            {key: 'GI', label: 'GI'}]\r\n                    },\r\n                    {\r\n                        \"name\": 'CalÃ§ado Infantil',\r\n                        \"grade\": [\r\n                            {key: '15', label: '15'},\r\n                            {key: '16', label: '16'},\r\n                            {key: '17', label: '17'},\r\n                            {key: '18', label: '18'},\r\n                            {key: '19', label: '19'},\r\n                            {key: '20', label: '20'},\r\n                            {key: '21', label: '21'},\r\n                            {key: '22', label: '22'},\r\n                            {key: '23', label: '23'},\r\n                            {key: '24', label: '24'},\r\n                            {key: '25', label: '25'},\r\n                            {key: '26', label: '26'},\r\n                            {key: '27', label: '27'},\r\n                            {key: '28', label: '28'},\r\n                            {key: '29', label: '29'},\r\n                            {key: '30', label: '30'},\r\n                            {key: '31', label: '31'},\r\n                            {key: '32', label: '32'},\r\n                            {key: '33', label: '33'},\r\n                            {key: '34', label: '34'},\r\n                            {key: '35', label: '35'},\r\n                            {key: '36', label: '36'}]\r\n                    },\r\n                    {\r\n                        \"name\": 'Roupa Infantil 8-16',\r\n                        \"grade\": [\r\n                            {key: '8', label: '8'},\r\n                            {key: '10', label: '10'},\r\n                            {key: '12', label: '12'},\r\n                            {key: '14', label: '14'},\r\n                            {key: '16', label: '16'}]\r\n                    },\r\n                    {\r\n                        \"name\": 'CalÃ§ado Infantil Duplo',\r\n                        \"grade\": [{key: '17/18', label: '17/18'},\r\n                            {key: '19/20', label: '19/20'},\r\n                            {key: '21/22', label: '21/22'},\r\n                            {key: '23/24', label: '23/24'},\r\n                            {key: '25/26', label: '25/26'},\r\n                            {key: '27/28', label: '27/28'},\r\n                            {key: '29/30', label: '29/30'},\r\n                            {key: '31/32', label: '31/32'},\r\n                            {key: '33/34', label: '33/34'},\r\n                            {key: '35/36', label: '35/36'}]\r\n                    },\r\n                    {\r\n                        \"name\": 'Roupa Adulto PP',\r\n                        \"grade\": [\r\n                            {key: 'PP', label: 'PP'},\r\n                            {key: 'EP', label: 'EP'},]\r\n                    },\r\n                    {\r\n                        \"name\": 'CalÃ§ado Adulto',\r\n                        \"grade\": [{key: '33', label: '33'},\r\n                            {key: '34', label: '34'},\r\n                            {key: '35', label: '35'},\r\n                            {key: '36', label: '36'},\r\n                            {key: '37', label: '37'},\r\n                            {key: '38', label: '38'},\r\n                            {key: '39', label: '39'},\r\n                            {key: '40', label: '40'},\r\n                            {key: '41', label: '41'},\r\n                            {key: '42', label: '42'},\r\n                            {key: '43', label: '43'},\r\n                            {key: '44', label: '44'}]\r\n                    },\r\n                    {\r\n                        \"name\": 'Roupa Adulto 34-56',\r\n                        \"grade\": [\r\n                            {key: '34', label: '34'},\r\n                            {key: '36', label: '36'},\r\n                            {key: '38', label: '38'},\r\n                            {key: '40', label: '40'},\r\n                            {key: '42', label: '42'},\r\n                            {key: '44', label: '44'},\r\n                            {key: '46', label: '46'},\r\n                            {key: '48', label: '48'},\r\n                            {key: '50', label: '50'},\r\n                            {key: '52', label: '52'},\r\n                            {key: '54', label: '54'},\r\n                            {key: '56', label: '56'},\r\n                            {key: '58', label: '58'}]\r\n                    },\r\n                    {\r\n                        \"name\": 'CalÃ§ado Adulto Duplo',\r\n                        \"grade\": [\r\n                            {key: '33/34', label: '33/34'},\r\n                            {key: '35/36', label: '35/36'},\r\n                            {key: '37/38', label: '37/38'},\r\n                            {key: '39/40', label: '39/40'},\r\n                            {key: '41/42', label: '41/42'},\r\n                            {key: '43/44', label: '43/44'},\r\n                            {key: '45/46', label: '45/46'},\r\n                            {key: '47/48', label: '47/48'}]\r\n                    },\r\n                    {\r\n                        \"name\": 'Roupa Adulto P-M-G-GG',\r\n                        \"grade\": [\r\n                            {key: 'P', label: 'P'},\r\n                            {key: 'M', label: 'M'},\r\n                            {key: 'G', label: 'G'},\r\n                            {key: 'GG', label: 'GG'}]\r\n                    },\r\n                    {\r\n                        \"name\": 'CalÃ§ado Adulto Big',\r\n                        \"grade\": [{key: '45', label: '45'},\r\n                            {key: '46', label: '46'},\r\n                            {key: '47', label: '47'},\r\n                            {key: '48', label: '48'}]\r\n                    },\r\n                    {\r\n                        \"name\": 'Roupa Adulto XGs',\r\n                        \"grade\": [\r\n                            {key: 'XG', label: 'XG'},\r\n                            {key: 'X1', label: 'X1'},\r\n                            {key: 'X2', label: 'X2'},\r\n                            {key: 'X3', label: 'X3'},\r\n                            {key: 'GGG', label: 'GGG'},\r\n                            {key: 'EG', label: 'EG'},\r\n                            {key: 'EGG', label: 'EGG'},\r\n                            {key: 'EXGG', label: 'EXGG'},\r\n                            {key: 'G1', label: 'G1'},\r\n                            {key: 'G2', label: 'G2'},\r\n                            {key: 'G3', label: 'G3'},\r\n                            {key: 'G4', label: 'G4'},\r\n                            {key: '1G', label: '1G'},\r\n                            {key: '2G', label: '2G'},\r\n                            {key: '3G', label: '3G'},\r\n                            {key: '4G', label: '4G'}]\r\n                    },\r\n                    {\r\n                        \"name\": 'Cinto',\r\n                        \"grade\": [\r\n                            {key: '90', label: '90'},\r\n                            {key: '95', label: '95'},\r\n                            {key: '100', label: '100'},\r\n                            {key: '105', label: '105'},\r\n                            {key: '110', label: '110'},\r\n                            {key: '115', label: '115'},\r\n                            {key: '120', label: '120'}]\r\n                    },\r\n                    {\r\n                        \"name\": 'Img Link',\r\n                        \"grade\": {key: 'img_link', label: 'Img Link'}\r\n                    },\r\n                ],\r\n                items:[],\r\n                mapped_items: [],\r\n                marcas: {},\r\n                multiSearch: {},\r\n                suggestion_selected: {\r\n                    cod_marca: 0,\r\n                    fornecedores: [{fan_fornecedor: ''}],\r\n                    nom_marca: \"carregando\",\r\n                },\r\n                suggestions: [\r\n                    {\r\n                        data: [\r\n                            {\r\n                                cod_marca: 0,\r\n                                fornecedores: [],\r\n                                nom_marca: \"carregando marcas\",\r\n                            }\r\n                        ]\r\n                    }\r\n                ],\r\n                marcas_suggestion_query: \"\"\r\n            };\r\n        },\r\n        computed: {\r\n            filteredData() {\r\n                if (this.multiSearch) {\r\n                    return this.items.filter((item) => {\r\n                        return Object.entries(this.multiSearch).every(([key, value]) => {\r\n                            if (value.includes(\"|\") && !value.includes(\"!\")) {\r\n                                let el = value.split(\"|\");\r\n                                return el.some((elem) =>\r\n                                    (item[key] || \"\").toString().toUpperCase().startsWith(elem.toString().toUpperCase())\r\n                                );\r\n                            }\r\n                            if (value.substring(0, 1) === \"!\" && !value.includes(\"|\")) {\r\n                                let el = value.split(\"!\");\r\n                                return el.some((elem) =>\r\n                                    !(item[key] || \"\").toString().toUpperCase().startsWith(elem.toString().toUpperCase())\r\n                                );\r\n                            }\r\n                            if (value.includes(\"|\") && value.substring(0, 1) === \"!\") {\r\n                                let el = value.split(\"!\")[1].split(\"|\");\r\n                                return !el.some((elem) =>\r\n                                    (item[key] || \"\").toString().toUpperCase().startsWith(elem.toString().toUpperCase())\r\n                                );\r\n                            }\r\n                            if ((key === \"dat_cadastro\" || key === \"dat_ultcompra\") && value.substring(0, 1) === \"<\") {\r\n                                let el = value.split(\"<\");\r\n                                if (item[key] !== \" \") {\r\n                                    return moment(item[key], 'YYYY-MM-DD').toDate() < moment(el[1], 'YYYY-MM-DD').toDate();\r\n                                }\r\n                            }\r\n                            if ((key === \"dat_cadastro\" || key === \"dat_ultcompra\") && value.substring(0, 1) === \">\") {\r\n                                let el = value.split(\">\");\r\n                                if (item[key] !== \" \") {\r\n                                    return moment(item[key], 'YYYY-MM-DD').toDate() > moment(el[1], 'YYYY-MM-DD').toDate();\r\n                                }\r\n                            }\r\n                            if (value.substring(0, 1) === \">\") {\r\n                                let el = value.split(\">\");\r\n                                if (item[key] !== \" \") {\r\n                                    return Number(item[key] || \"\") > el[1];\r\n                                }\r\n                            }\r\n\r\n                            if (value.substring(0, 1) === \"<\") {\r\n                                let el = value.split(\"<\");\r\n                                if (item[key] !== \" \") {\r\n                                    return Number(item[key] || \"\") < el[1];\r\n                                }\r\n                            }\r\n                            if (value.substring(0, 1) === \"=\") {\r\n                                let el = value.split(\"=\");\r\n                                return (item[key] || \"\").toString().toUpperCase() === el[1].toString().toUpperCase();\r\n                            }\r\n                            // TODO - trying to implement estoque_history filter\r\n                            if ((key === \"estoque_history\") && value.substring(0, 1) === \"m\") {\r\n                                // let test = item[key].map(a => a.data_movto);\r\n                                console.log('test')\r\n\r\n                                let el = value.split(\"m\");\r\n                                if (item[key] !== \" \") {\r\n                                    console.log(el)\r\n                                    console.log(\"item[key]\")\r\n                                    console.log(item[key])\r\n\r\n                                    let result = item[key].filter( history_item => moment(history_item.data_movto, 'YYYY-MM-DD').toDate() < moment(el[1], 'YYYY-MM-DD').toDate());\r\n\r\n                                    // let result = item[key].filter( history_item => history_item.saidas >= -50 && history_item.saidas <= el[1])\r\n                                    console.log(\"result\")\r\n                                    console.log(result)\r\n\r\n                                    // console.log(item[key].map(a => a.saidas))\r\n                                    // let retorno = Number(item[key].saidas || \"\") < el[1]\r\n                                    // console.log(\"item[key].saidas\")\r\n                                    // console.log(item[key].saidas)\r\n                                    // console.log(\"retorno\")\r\n                                    // console.log(retorno)\r\n                                    return item[key].filter( history_item => moment(history_item.data_movto, 'YYYY-MM-DD').toDate() < moment(el[1], 'YYYY-MM-DD').toDate());\r\n                                    // return item[key].filter( history_item => moment(history_item.data_movto, 'YYYY-MM-DD').toDate() < moment(el[1], 'YYYY-MM-DD').toDate());\r\n\r\n                                }\r\n                            }\r\n                            if ((key === \"estoque_history\") && value.substring(0, 1) === \"M\") {\r\n                                // let test = item[key].map(a => a.data_movto);\r\n                                console.log('test')\r\n\r\n                                let el = value.split(\"M\");\r\n                                if (item[key] !== \" \") {\r\n                                    console.log(el)\r\n                                    console.log(\"item[key]\")\r\n                                    console.log(item[key])\r\n\r\n                                    let result = item[key].filter( history_item => moment(history_item.data_movto, 'YYYY-MM-DD').toDate() > moment(el[1], 'YYYY-MM-DD').toDate());\r\n\r\n                                    // let result = item[key].filter( history_item => history_item.saidas >= -50 && history_item.saidas <= el[1])\r\n                                    console.log(\"result\")\r\n                                    console.log(result)\r\n\r\n                                    // console.log(item[key].map(a => a.saidas))\r\n                                    // let retorno = Number(item[key].saidas || \"\") < el[1]\r\n                                    // console.log(\"item[key].saidas\")\r\n                                    // console.log(item[key].saidas)\r\n                                    // console.log(\"retorno\")\r\n                                    // console.log(retorno)\r\n                                    return item[key].filter( history_item => moment(history_item.data_movto, 'YYYY-MM-DD').toDate() < moment(el[1], 'YYYY-MM-DD').toDate());\r\n                                    // return item[key].filter( history_item => moment(history_item.data_movto, 'YYYY-MM-DD').toDate() < moment(el[1], 'YYYY-MM-DD').toDate());\r\n                                }\r\n                            }\r\n                            // if (value.substring(0, 1) === \"<\" && (key === \"dat_estoque_history_ini\" || key === \"dat_estoque_history_fim\")) {\r\n                            //     // this.just_for_testing = item\r\n                            //     let el = value.split(\"<\");\r\n                            //     if (item[key] !== \" \") {\r\n                            //         return moment(item[key], 'YYYY-MM-DD').toDate() < moment(el[1], 'YYYY-MM-DD').toDate();\r\n                            //     }\r\n                            // }\r\n\r\n                            return (item[key] || \"\").toString().toUpperCase().includes(value.toString().toUpperCase());\r\n                        });\r\n                    });\r\n                } else {\r\n                    return this.items;\r\n                }\r\n            },\r\n            // saldoEstoque() {\r\n            //\r\n            // },\r\n            //TODO maybe one can speed code up with reduce instead of map+filter\r\n            mappedItemsComputed() {\r\n                const mapped_items = this.items.map((item) => {\r\n                    return {\r\n                        ...item,\r\n                        estoque_history: item.estoque_history.filter((movto) => {\r\n                            let data_aux =  new Date(movto.data_movto)\r\n                            if (data_aux > this.data_movto_ini && data_aux < this.data_movto_fim)\r\n                                return true\r\n                        })\r\n                    }\r\n                })\r\n                return mapped_items\r\n            },\r\n            filteredItemsComputed() {\r\n                // return  Object.freeze(this.filteredItemsByDescription(this.filteredItemsByCor(this.items)))\r\n                return  this.filteredItemsByCor(this.filteredItemsByDescription(this.items))\r\n                // return  this.filteredItemsByDescription(this.filteredItemsByCor(this.items))\r\n                // return this.items.filter(item => item.des_produto.toLowerCase().includes(this.filters.des_produto.toLowerCase()))\r\n            },\r\n\r\n\r\n            filteredmappedItemsComputed() {\r\n                const filtered = this.items.filter(item => {\r\n                // const filtered = this.mappedItemsComputed.filter(item => {\r\n                //     console.log(filtered)\r\n                    return Object.keys(this.filters).every(key =>{\r\n                        String(item[key].toString().toLowerCase()).includes(this.filters[key].toString().toLowerCase())\r\n                    }\r\n                    )\r\n                });\r\n                // console.log('filtered')\r\n                // console.log(filtered)\r\n                return filtered\r\n                // return this.items\r\n            },\r\n            computedFields() {\r\n                // return [].concat(this.baseFields, this.adultoFields, this.valoresFields)\r\n                return [].concat(this.baseFields, this.gradeFields, this.valoresFields)\r\n                // return [].concat(this.baseFields, this.gradeFields, this.totaisFields, this.valoresFields)\r\n            },\r\n            gradeFields() {\r\n                var grades = this.grades_selected.map(selected => {\r\n                    return selected.grade\r\n                })\r\n                // return [].concat(grades.flat(1)) //manter totaisFields aqui para que os totais fiquem corretos\r\n                return [].concat(grades.flat(1), this.totaisFields) //manter totaisFields aqui para que os totais fiquem corretos\r\n                // return [].concat(this.infantoFields, this.adultoFields, this.totaisFields)\r\n            },\r\n            baseFields() {\r\n                return [\r\n                    {key: 'selected', label: 'Sel.'},\r\n                    {key: 'nom_marca', label: 'Nom. Marca', sortable: true},\r\n                    {key: 'raz_fornecedor', label: 'Forn.', sortable: true},\r\n                    {key: 'dat_cadastro', label: 'Data Cad.', sortable: true},\r\n                    {key: 'dat_ultcompra', label: 'Data UltCompra', sortable: true},\r\n                    {key: 'estoque_history', label: 'EstoqHist'},\r\n                    {key: 'estoque_history.data_movto', label: 'DatEstoqFim'},\r\n                    {key: 'cod_referencia', label: 'Ref.', sortable: true},\r\n                    {key: 'des_cor', label: 'Cor', sortable: true},\r\n                    {key: 'img', label: 'Img.'},\r\n                    {key: 'img_link', label: 'Img Link'},\r\n                    {key: 'des_produto', label: 'DescriÃ§Ã£o.', sortable: true},\r\n                    {key: 'actions', label: '+'}\r\n                ]\r\n            },\r\n            valoresFields() {\r\n                return [\r\n                    // {key: 'totais', label: 'Tot.', sortable: true},\r\n                    {key: 'vlr_custo_bruto', label: 'Custo', sortable: true},\r\n                    {key: 'vlr_venda1', label: 'Vlr. Venda', sortable: true}\r\n                ]\r\n            },\r\n            totaisFields() {\r\n                return [\r\n                    {key: 'totais', label: 'Tot.', sortable: true},\r\n                    {key: 'saidas', label: 'SaÃ­das.', sortable: true}\r\n                ]\r\n            },\r\n            filteredOptions() {\r\n                return [\r\n                    {\r\n                        // data: this.marcas\r\n                        data: this.suggestions[0].data\r\n                            .filter(option => {\r\n                                // return 'a'\r\n                                return option.nom_marca.toLowerCase().indexOf(this.marcas_suggestion_query.toLowerCase()) > -1;\r\n                            })\r\n                            .map(filtered_items => {\r\n                                const mapped_items = filtered_items;\r\n                                return mapped_items;\r\n                            })\r\n                    }\r\n                ];\r\n            }\r\n\r\n            // gradeTotals() {\r\n            //     let sum = this.filteredItemsComputed.reduce(function (sum, item) {\r\n            //     let itemValor = parseFloat(item.grade_estoque[0])\r\n            //     if (!isNaN(itemValor)) {\r\n            //         return sum + itemValor\r\n            //     } else {\r\n            //         return sum\r\n            //     }\r\n            // }, 0)\r\n            // return sum\r\n            // }\r\n        },\r\n\r\n        beforeMount() {\r\n            this.loadMarcas()\r\n            // this.grade_estoque_totais= {'33':0}\r\n            // this.updateEstoqueProdutos()\r\n        },\r\n        methods: {\r\n            filteredItemsByDescription:function(items){\r\n                console.log(items)\r\n                // return items.filter(item => !item.des_produto.toLowerCase().indexOf(this.filters.des_produto))\r\n                return this.items.filter(item => (item.des_produto||'').toLowerCase().includes(this.filters.des_produto.toLowerCase()))},\r\n                // return items.filter(item => !item.des_produto.toLowerCase().includes(this.filters.des_produto))\r\n            //    TODO\r\n            //    des_cor in FERRACINI = null sometimes, find a way to bypass\r\n            //    chaining filters like below might work\r\n            //    https://5balloons.info/combining-multiple-filters-on-list-using-computed-properties-in-vuejs/\r\n            filteredItemsByCor:function(items){\r\n                console.log(items)\r\n                return this.items.filter(item => (item.des_cor||'').toLowerCase().includes(this.filters.des_cor.toLowerCase()))},\r\n\r\n            // const filtered = this.items.filter(item => {\r\n            //     // const filtered = this.mappedItemsComputed.filter(item => {\r\n            //     //     console.log(filtered)\r\n            //         return Object.keys(this.filters).every(key =>{\r\n            //             String(item[key].toString().toLowerCase()).includes(this.filters[key].toString().toLowerCase())\r\n            //         }\r\n            //         )\r\n            //     })\r\n\r\n\r\n\r\n\r\n            receiveDataMovtoIni(value) {\r\n                this.data_movto_ini = value\r\n            },\r\n            receiveDataMovtoFim(value) {\r\n                this.data_movto_fim = value\r\n            },\r\n            loadMarcas() {\r\n                const path = `/api/read/marcas/`;\r\n                // const path = `http://localhost/api/read/marcas/`; //this way works\r\n                axios.get(path)\r\n                    .then((res) => {\r\n                        // console.log('res_marcas');\r\n                        // console.log(res);\r\n                        // this.marcas = res.data\r\n                        this.suggestions[0].data = res.data\r\n                        Object.freeze(this.suggestions)\r\n                    })\r\n                    .catch((error) => {\r\n                        console.log(error)\r\n                        console.log(error.response.data); // => the response payload\r\n                    })\r\n            },\r\n            clickHandler(item) {\r\n                console.log(item)\r\n                // event fired when clicking on the input\r\n            },\r\n            onSelected(item) {\r\n                this.suggestion_selected = item.item;\r\n                // this.form_selected = this.availableFornecedores\r\n            },\r\n            onInputChange(text) {\r\n                console.log(text)\r\n            },\r\n            /**\r\n             * This is what the <input/> value is set to when you are selecting a suggestion.\r\n             */\r\n            getSuggestionValue(suggestion) {\r\n                return suggestion.item.nom_marca;\r\n            },\r\n            focusMe(e) {\r\n                console.log(e) // FocusEvent\r\n            },\r\n            estoqueHistoryBoundDates(object) {\r\n                var date_array = Object.keys(object)\r\n                var date_diff_min = 0;\r\n                var date_diff_max = 0;\r\n                var estoque_history_bound_dates = {\r\n                    'data_ini': this.default_date,\r\n                    'data_fim': this.default_date\r\n                }\r\n\r\n                if (this.data_movto_ini < this.data_movto_fim) {\r\n                    for (let i = 0; i < date_array.length; i++) {\r\n                        date_diff_min = new Date(date_array[i]) - this.data_movto_ini;\r\n                        if (date_diff_min > 0) {\r\n                            if (i > 0) {\r\n                                estoque_history_bound_dates.data_ini = date_array[i - 1]\r\n                            }\r\n                            break\r\n                        }\r\n                    }\r\n\r\n                    for (let i = date_array.length; i > 0; i--) {\r\n                        date_diff_max = new Date(date_array[i]) - this.data_movto_fim;\r\n                        if (date_diff_max < 0) {\r\n                            estoque_history_bound_dates.data_fim = date_array[i];\r\n                            break\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return estoque_history_bound_dates\r\n            },\r\n            gradeTotals(object) {\r\n                let totais_E = Object.keys(object).reduce(function (sum, key) {\r\n                    return sum + (key.slice(-1) == 'E' && object[key]);\r\n                }, 0);\r\n\r\n                let totais = Object.keys(object).reduce(function (sum, key) {\r\n                    return sum + (key.slice(-1) !== 'E' && object[key]);\r\n                }, 0);\r\n                return {'totais_E':totais_E, 'totais': totais}\r\n            },\r\n            gradeEstoque(object) {\r\n                // console.log(object)\r\n                var grade_estoque = Object.values(object)\r\n                // console.log(\"grade_estoque\")\r\n                // console.log(grade_estoque)\r\n                // console.log(\"grade_estoque[grade_estoque.lenght - 1]\")\r\n                // console.log(grade_estoque[grade_estoque.lenght - 1])\r\n                return grade_estoque[grade_estoque.lenght - 1]\r\n\r\n            },\r\n    normalizeString(s) {\r\n      return `${s}`.trim().toLowerCase();\r\n    },\r\n    filterFn(row) {\r\n      return this.filter.split(',')\r\n        .map(this.normalizeString)\r\n        .some(\r\n          term => Object.values(row)\r\n            .map(this.normalizeString)\r\n            .some(\r\n              val => val.indexOf(term) > -1\r\n            )\r\n        );\r\n    },\r\n            expandAdditionalInfo(row) {\r\n                row._showDetails = !row._showDetails;\r\n            },\r\n            readProdutosFromMongo() {\r\n                const path = `/api/estoque/read_produtos_from_mongo_db_test/${this.suggestion_selected.cod_marca}`\r\n                // const path = `/api/estoque/read_produtos_from_mongo_db/${this.cod_marca}`\r\n                console.log(path)\r\n                axios.get(path)\r\n                    .then((produtos) => {\r\n                        console.log(\"produtos\")\r\n                        console.log(produtos)\r\n                        this.items = produtos.data\r\n                        Object.freeze(this.items)\r\n                        // console.log(\"this.items\")\r\n                        // console.log(this.items)\r\n                    })\r\n                    .catch((error) => {\r\n                        console.log(error)\r\n                    })\r\n            },\r\n            readProdutosFromMongoWithFilter() {\r\n                // const path = `/api/estoque/read_produtos_from_mongo_db_filter/${this.suggestion_selected.cod_marca}/${this.filters.des_produto}`\r\n                // this.data_movto_ini = '2000-01-01 01:01:01.000000'\r\n                // this.data_movto_fim = '2020-01-01 01:01:01.000000'\r\n                const path = `/api/estoque/read_produtos_from_mongo_db_beanie/${this.suggestion_selected.cod_marca}/${this.data_movto_ini}/${this.data_movto_fim}`\r\n                // const path = `/api/estoque/read_produtos_from_mongo_db/${this.cod_marca}`\r\n                console.log(path)\r\n                axios.get(path)\r\n                    .then((produtos) => {\r\n                        console.log(\"produtos\")\r\n                        console.log(produtos)\r\n                        this.items = produtos.data\r\n                        Object.freeze(this.items)\r\n                        // console.log(\"this.items\")\r\n                        // console.log(this.items)\r\n                    })\r\n                    .catch((error) => {\r\n                        console.log(error)\r\n                    })\r\n            },\r\n            updateEstoqueProdutos() {\r\n                // this.data_movto_ini = '2000-01-01T11%3A18%3A26.989000'\r\n                this.data_movto_ini = '2000-01-01 01:01:01.000000'\r\n                // this.data_movto_ini = moment(new Date).format('YYYY-MM-DDTHH:mm:ss.SSSSSS')\r\n                this.cod_marca = '567'\r\n\r\n                const path = `/api/estoque/read_produtos_from_postgres_db/${this.cod_marca}/${this.data_movto_ini}`\r\n                axios.get(path)\r\n                    .then((produtos_da_marca) => {\r\n                        console.log(\"produtos_da_marca\")\r\n                        console.log(produtos_da_marca)\r\n                        // this.items = produtos_da_marca.data\r\n                        // console.log(\"this.items\")\r\n                        // console.log(this.items)\r\n                    })\r\n                    .catch((error) => {\r\n                        console.log(error)\r\n                    })\r\n            },\r\n            dateSorter(a, b, key) {\r\n\r\n                if (key === 'dat_ultcompra' || key === 'dat_cadastro'|| key === 'data_movto') {\r\n                    if (moment(a[key], 'DD/MM/YYYY').toDate() > moment(b[key], 'DD/MM/YYYY').toDate()) return 1;\r\n                    if (moment(a[key], 'DD/MM/YYYY').toDate() < moment(b[key], 'DD/MM/YYYY').toDate()) return -1;\r\n                    return 0;\r\n                } else {\r\n                    return false       // If field is not `date` we let b-table handle the sorting\r\n                }\r\n            },\r\n        },\r\n        watch: {\r\n        }\r\n    }\r\n</script>\r\n\r\n\r\n<style>\r\n    /*<style scoped>*/\r\n    .autosuggest-container {\r\n        position: absolute;\r\n        display: flex;\r\n        justify-content: center;\r\n        width: 280px;\r\n\r\n    }\r\n\r\n    .autosuggest__results {\r\n        z-index: 1000;\r\n        position: absolute;\r\n        display: flex;\r\n        /*justify-content: center;*/\r\n        /*width: 280px;*/\r\n        background-color: #fff;\r\n        background-clip: padding-box;\r\n        border: 1px solid rgba(0, 0, 0, .15);\r\n        border-radius: .25rem;\r\n\r\n    }\r\n\r\n\r\n</style>"]}]}